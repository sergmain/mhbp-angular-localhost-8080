"use strict";(self.webpackChunkmhbp_angular=self.webpackChunkmhbp_angular||[]).push([[576],{6576:(we,H,s)=>{s.r(H),s.d(H,{CompanyRoutes:()=>nt,CompanyRoutingModule:()=>et,CompnyModule:()=>ve});var c=s(1180),d=s(6895),r=s(9299),R=s(3081),ot=s(1623),at=s(6603),t=s(4650);let ct=(()=>{class e{constructor(){}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["company"]],decls:3,vars:0,template:function(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"company works!"),t.qZA(),t._uU(2,"\n"))}})),e})();var _=s(3626),F=s(8318),Z=s(3788),E=s(529),I=s(7528),it=s(2340),z=s(9751),pt=s(2076),st=s(9646),ut=s(5650),_t=s(4351),lt=s(262),$=s(4327);const m=e=>`${it.N.baseUrl}dispatcher/company/${e}`;let g=(()=>{class e{constructor(n){(0,c.Z)(this,"http",void 0),(0,c.Z)(this,"companies",a=>this.http.get(m("companies"),{params:{page:a}})),(0,c.Z)(this,"addFormCommitCompany",a=>this.http.post(m("company-add-commit"),(0,I.P)({companyName:a}))),(0,c.Z)(this,"editCompany",a=>this.http.get(m(`company-edit/${a}`))),(0,c.Z)(this,"editFormCommitCompany",(a,i,p)=>this.http.post(m("company-edit-commit"),(0,I.P)({companyUniqueId:a,name:i,groups:p}))),(0,c.Z)(this,"accounts",(a,i)=>this.http.get(m(`company-accounts/${i}`),{params:{page:a}})),(0,c.Z)(this,"addFormCommitNewAccount",(a,i)=>this.http.post(m(`company-account-add-commit/${i}`),a)),(0,c.Z)(this,"edit",(a,i)=>this.http.get(m(`company-account-edit/${a}/${i}`))),(0,c.Z)(this,"editFormCommit",(a,i,p,l)=>this.http.post(m(`company-account-edit-commit/${l}`),(0,I.P)({id:a,publicName:i,enabled:p,companyUniqueId:l}))),(0,c.Z)(this,"passwordEdit",(a,i)=>this.http.get(m(`company-account-password-edit/${i}/${a}`))),(0,c.Z)(this,"passwordEditFormCommit",(a,i,p,l)=>this.http.post(m(`company-account-password-edit-commit/${l}`),(0,I.P)({id:a,password:i,password2:p,companyUniqueId:l}))),(0,c.Z)(this,"editRoles",(a,i)=>this.http.get(m(`company-account-edit-roles/${i}/${a}`))),(0,c.Z)(this,"rolesEditFormCommit",(a,i,p,l)=>this.http.post(m(`company-account-edit-roles-commit/${l}`),(0,I.P)({accountId:a,role:i,checkbox:p,companyId:l}))),(0,c.Z)(this,"batches",(a,i)=>this.http.get(m(`batch/company-batches/${i}`),{params:{page:a}})),(0,c.Z)(this,"processBatchDelete",(a,i)=>this.http.get(m(`batch/company-batch-delete/${a}/${i}`))),(0,c.Z)(this,"processBatchDeleteCommit",(a,i)=>this.http.post(m(`batch/company-batch-delete-commit/${a}`),(0,I.P)({batchId:i}))),(0,c.Z)(this,"processBatchesBulkDeleteCommit",(a,i)=>this.http.post(m(`batch/company-batch-bulk-delete-commit/${a}`),(0,I.P)({batchIds:i}))),(0,c.Z)(this,"uploadFile",(a,i,p)=>this.http.post(m(`batch/company-batch-upload-from-file/${a}`),(0,I.P)({sourceCodeId:i,file:p}))),(0,c.Z)(this,"getBatchStatus",(a,i)=>this.http.get(m(`batch/company-batch-status/${a}/${i}`))),(0,c.Z)(this,"downloadProcessingResult",(a,i)=>{let p=new E.WM;return p=p.append("Accept","application/octet-stream"),this.http.get(m(`batch/company-batch-download-result/${a}/${i}`),{headers:p,observe:"response",responseType:"blob"})}),(0,c.Z)(this,"downloadOriginFile",(a,i,p)=>{let l=new E.WM;return l=l.append("Accept","application/octet-stream"),this.http.get(m(`batch/company-batch-download-origin-file/${a}/${i}/${p}`),{headers:l,observe:"response",responseType:"blob"})}),(0,c.Z)(this,"sourceCodesForCompany",a=>this.http.get(m(`batch/company-batch-source-codes/${a}`))),this.http=n}downloadProcessingResults(n,a){const i="result "+n.toString()+".zip",p=new ut,l=n.map(w=>({id:w.toString(),fileName:"empty",response:null,companyId:a}));return new z.y(w=>{(0,pt.D)(l).pipe((0,_t.b)(b=>this.downloadProcessingResult(b.companyId,b.id).pipe((0,lt.K)(qe=>(0,st.of)(qe)),this.parseProcessableItemOperator(b)))).subscribe({next:b=>{},error:b=>w.error(b),complete:()=>{l.forEach(b=>{p.file(b.fileName,b.response.body)}),p.generateAsync({type:"blob"}).then(b=>{$.saveAs(b,i)}),w.next(!0),w.complete()}})})}parseProcessableItemOperator(n){return a=>new z.y(i=>a.subscribe({next:p=>{n.response=p,n.fileName=p.ok?`${n.id}.zip`:`${n.id} error`,i.next()},error:p=>i.error(p),complete:()=>i.complete()}))}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.LFG(E.eN))}),(0,c.Z)(e,"\u0275prov",t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})),e})();var W=s(4190),f=s(1439),C=s(9185),S=s(6890),N=s(2555),j=s(7530),x=s(6264),T=s(305),A=s(5014),v=s(8868),q=s(3370),y=s(9863),P=s(7824),X=s(1336),U=s(4859);function rt(e,o){1&e&&t.GkF(0)}function mt(e,o){if(1&e&&(t.TgZ(0,"app-ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,rt,1,0,"ng-container",4),t._uU(3,"\n                "),t.qZA()),2&e){t.oxw(2);const n=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function dt(e,o){1&e&&(t.TgZ(0,"app-ct-section-header-row"),t._uU(1,"\n            "),t.TgZ(2,"app-ct-alert",6),t._uU(3,"\n                Management of companies are disabled, assetMode is 'replicated'.\n            "),t.qZA(),t._uU(4,"\n        "),t.qZA())}function ht(e,o){1&e&&t.GkF(0)}function Ut(e,o){1&e&&t.GkF(0)}function Zt(e,o){if(1&e&&(t.TgZ(0,"app-ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,Ut,1,0,"ng-container",4),t._uU(3,"\n                "),t.qZA()),2&e){t.oxw(2);const n=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function gt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-section"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-flex",3),t._uU(7,"\n                "),t.TgZ(8,"app-ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11,"Companies"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n                "),t.YNc(14,mt,4,1,"app-ct-flex-item",0),t._uU(15,"\n            "),t.qZA(),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n        "),t.YNc(18,dt,5,0,"app-ct-section-header-row",0),t._uU(19,"\n    "),t.qZA(),t._uU(20,"\n    "),t.TgZ(21,"app-ct-section-body"),t._uU(22,"\n        "),t.TgZ(23,"app-ct-section-body-row"),t._uU(24,"\n            "),t.YNc(25,ht,1,0,"ng-container",4),t._uU(26,"\n        "),t.qZA(),t._uU(27,"\n    "),t.qZA(),t._uU(28,"\n    "),t.TgZ(29,"app-ct-section-footer"),t._uU(30,"\n        "),t.TgZ(31,"app-ct-section-footer-row"),t._uU(32,"\n            "),t.TgZ(33,"app-ct-flex",3),t._uU(34,"\n                "),t.TgZ(35,"app-ct-flex-item"),t._uU(36,"\n                    "),t.TgZ(37,"app-ct-table-pagination",5),t.NdJ("prev",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.prevPage())})("next",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.nextPage())}),t.qZA(),t._uU(38,"\n                "),t.qZA(),t._uU(39,"\n                "),t.YNc(40,Zt,4,1,"app-ct-flex-item",0),t._uU(41,"\n            "),t.qZA(),t._uU(42,"\n        "),t.qZA(),t._uU(43,"\n    "),t.qZA(),t._uU(44,"\n"),t.qZA()}if(2&e){const n=t.oxw(),a=t.MAs(3);t.xp6(14),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.simpleCompaniesResult.assetMode)),t.xp6(4),t.Q6J("ngIf",n.dispatcherAssetModeService.isReplicated(n.simpleCompaniesResult.assetMode)),t.xp6(7),t.Q6J("ngTemplateOutlet",a),t.xp6(12),t.Q6J("pageableDefault",n.simpleCompaniesResult.companies),t.xp6(3),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.simpleCompaniesResult.assetMode))}}function ft(e,o){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Id"),t.qZA())}function Ct(e,o){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.uniqueId," ")}}function xt(e,o){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Name"),t.qZA())}function Tt(e,o){if(1&e&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.name," ")}}function At(e,o){1&e&&(t.TgZ(0,"th",16),t._uU(1," "),t.qZA())}const yt=function(e){return["../",e,"edit"]};function bt(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                                "),t.TgZ(2,"app-ct-flex-item"),t._uU(3,"\n                                    "),t.TgZ(4,"a",19),t._uU(5,"Edit"),t.qZA(),t._uU(6,"\n                                "),t.qZA(),t._uU(7,"\n                            "),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(1,yt,n.uniqueId))}}function vt(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                            "),t.YNc(2,bt,8,3,"ng-container",0),t._uU(3,"\n                        "),t.BQk()),2&e){const n=t.oxw(3);t.xp6(2),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.simpleCompaniesResult.assetMode))}}const qt=function(e){return["../",e,"accounts"]};function wt(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                            "),t.TgZ(2,"app-ct-flex-item"),t._uU(3,"\n                                "),t.TgZ(4,"a",19),t._uU(5,"Accounts"),t.qZA(),t._uU(6,"\n                            "),t.qZA(),t._uU(7,"\n                        "),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(1,qt,n.uniqueId))}}const It=function(e){return["../",e,"batches"]};function Rt(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                                "),t.TgZ(2,"app-ct-flex-item"),t._uU(3,"\n                                    "),t.TgZ(4,"a",19),t._uU(5,"Batches"),t.qZA(),t._uU(6,"\n                                "),t.qZA(),t._uU(7,"\n                            "),t.BQk()),2&e){const n=t.oxw(2).$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(1,It,n.uniqueId))}}function St(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                            "),t.YNc(2,Rt,8,3,"ng-container",0),t._uU(3,"\n                        "),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",1!==n.id)}}function Nt(e,o){if(1&e&&(t.TgZ(0,"td",17),t._uU(1,"\n                    "),t.TgZ(2,"app-ct-flex",18),t._uU(3,"\n                        "),t.YNc(4,vt,4,1,"ng-container",0),t._uU(5,"\n\n                        "),t.YNc(6,wt,8,3,"ng-container",0),t._uU(7,"\n\n                        "),t.YNc(8,St,4,1,"ng-container",0),t._uU(9,"\n                    "),t.qZA(),t._uU(10,"\n                "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(4),t.Q6J("ngIf",n.authenticationService.isRoleMainAdmin()),t.xp6(2),t.Q6J("ngIf",n.authenticationService.isRoleMainAdmin()),t.xp6(2),t.Q6J("ngIf",n.authenticationService.isRoleMainOperator()||n.authenticationService.isRoleMainSupport())}}function Mt(e,o){1&e&&t._UZ(0,"tr",20)}function Jt(e,o){1&e&&t._UZ(0,"tr",21)}function kt(e,o){if(1&e&&(t._uU(0,"\n    "),t.TgZ(1,"ct-table",7),t._uU(2,"\n        "),t.TgZ(3,"table",8),t._uU(4,"\n            "),t.ynx(5,9),t._uU(6,"\n                "),t.YNc(7,ft,2,0,"th",10),t._uU(8,"\n                "),t.YNc(9,Ct,2,1,"td",11),t._uU(10,"\n            "),t.BQk(),t._uU(11,"\n            "),t.ynx(12,12),t._uU(13,"\n                "),t.YNc(14,xt,2,0,"th",10),t._uU(15,"\n                "),t.YNc(16,Tt,2,1,"td",11),t._uU(17,"\n            "),t.BQk(),t._uU(18,"\n            "),t.ynx(19,13),t._uU(20,"\n                "),t.YNc(21,At,2,0,"th",10),t._uU(22,"\n                "),t.YNc(23,Nt,11,3,"td",11),t._uU(24,"\n            "),t.BQk(),t._uU(25,"\n            "),t.YNc(26,Mt,1,0,"tr",14),t._uU(27,"\n            "),t.YNc(28,Jt,1,0,"tr",15),t._uU(29,"\n        "),t.qZA(),t._uU(30,"\n    "),t.qZA(),t._uU(31,"\n")),2&e){const n=t.oxw();t.xp6(1),t.Q6J("isWaiting",n.isLoading),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(23),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",n.columnsToDisplay)}}function Lt(e,o){1&e&&(t._uU(0,"\n    "),t.TgZ(1,"button",22),t._uU(2," Add New Company "),t.qZA(),t._uU(3,"\n"))}let Bt=(()=>{class e extends F.S{constructor(n,a,i){super(n),(0,c.Z)(this,"authenticationService",void 0),(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"dispatcherAssetModeService",void 0),(0,c.Z)(this,"columnsToDisplay",["uniqueId","name","bts"]),(0,c.Z)(this,"simpleCompaniesResult",void 0),(0,c.Z)(this,"dataSource",new _.by([])),this.authenticationService=n,this.companyService=a,this.dispatcherAssetModeService=i}ngOnInit(){this.updateTable(0)}updateTable(n){this.setIsLoadingStart(),this.companyService.companies(n.toString()).subscribe({next:a=>{this.simpleCompaniesResult=a,this.dataSource=new _.by(this.simpleCompaniesResult.companies.content)},complete:()=>{this.setIsLoadingEnd()}})}prevPage(){this.updateTable(this.simpleCompaniesResult.companies.number-1)}nextPage(){this.updateTable(this.simpleCompaniesResult.companies.number+1)}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(Z.$h),t.Y36(g),t.Y36(W.F))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["companies"]],features:[t.qOj],decls:7,vars:1,consts:[[4,"ngIf"],["mainTableTemplate",""],["addButtonTemplate",""],["justify-content","space-between"],[4,"ngTemplateOutlet"],[3,"pageableDefault","prev","next"],["theme","info"],[3,"isWaiting"],["mat-table","mat-table",1,"mat-table",3,"dataSource"],["matColumnDef","uniqueId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","mat-cell",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","mat-cell"],["justify-content","flex-end","gap","9px"],["mat-flat-button","","color","primary","size","forTableRow",3,"routerLink"],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary","routerLink","../add"]],template:function(n,a){1&n&&(t.YNc(0,gt,45,5,"app-ct-section",0),t._uU(1,"\n\n\n\n"),t.YNc(2,kt,32,4,"ng-template",null,1,t.W1O),t._uU(4,"\n\n\n\n"),t.YNc(5,Lt,4,0,"ng-template",null,2,t.W1O)),2&n&&t.Q6J("ngIf",a.simpleCompaniesResult)},dependencies:[d.O5,d.tP,r.rH,f.U,C.n,S.V,N.R,j.a,x.i,T.Z,A.t,v.B,q.i,y._,P.C,X.v,U.zs,U.lW,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk]})),e})();var O=s(2199),M=s(2379),J=s(5510),k=s(1023),Y=s(284),h=s(9549),u=s(4006);const Qt=function(){return["../../companies"]};function Yt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11,"Edit Company"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"app-ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"app-ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"mat-form-field",2),t._uU(20,"\n                        "),t.TgZ(21,"mat-label"),t._uU(22,"Name of company"),t.qZA(),t._uU(23,"\n                        "),t.TgZ(24,"input",3),t.NdJ("ngModelChange",function(i){t.CHM(n);const p=t.oxw();return t.KtG(p.name=i)}),t.qZA(),t._uU(25,"\n                        "),t.TgZ(26,"mat-hint"),t._uU(27,"This is a required field."),t.qZA(),t._uU(28,"\n                    "),t.qZA(),t._uU(29,"\n                    "),t._UZ(30,"br"),t._uU(31,"\n                    "),t._UZ(32,"br"),t._uU(33,"\n                    "),t.TgZ(34,"mat-form-field",2),t._uU(35,"\n                        "),t.TgZ(36,"mat-label"),t._uU(37,"Company's groups"),t.qZA(),t._uU(38,"\n                        "),t.TgZ(39,"input",3),t.NdJ("ngModelChange",function(i){t.CHM(n);const p=t.oxw();return t.KtG(p.groups=i)}),t.qZA(),t._uU(40,"\n                    "),t.qZA(),t._uU(41,"\n                    "),t._UZ(42,"br"),t._uU(43,"\n                    "),t.TgZ(44,"app-ct-flex",4),t._uU(45,"\n                        "),t.TgZ(46,"app-ct-flex-item"),t._uU(47,"\n                            "),t.TgZ(48,"a",5),t._uU(49,"Cancel"),t.qZA(),t._uU(50,"\n                        "),t.qZA(),t._uU(51,"\n                        "),t.TgZ(52,"app-ct-flex-item"),t._uU(53,"\n                            "),t.TgZ(54,"button",6),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.saveChanges())}),t._uU(55,"Save Changes"),t.qZA(),t._uU(56,"\n                        "),t.qZA(),t._uU(57,"\n                    "),t.qZA(),t._uU(58,"\n                "),t.qZA(),t._uU(59,"\n            "),t.qZA(),t._uU(60,"\n        "),t.qZA(),t._uU(61,"\n    "),t.qZA(),t._uU(62,"\n    "),t.TgZ(63,"app-ct-col",1),t._uU(64,"\n        "),t._UZ(65,"app-ct-rest-status",7),t._uU(66,"\n    "),t.qZA(),t._uU(67,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(24),t.Q6J("ngModel",n.name),t.xp6(15),t.Q6J("ngModel",n.groups),t.xp6(9),t.Q6J("routerLink",t.DdM(4,Qt)),t.xp6(17),t.Q6J("content",n.operationStatusRest)}}let Dt=(()=>{class e{constructor(n,a,i){(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"router",void 0),(0,c.Z)(this,"companyUniqueId",void 0),(0,c.Z)(this,"name",void 0),(0,c.Z)(this,"groups",void 0),(0,c.Z)(this,"operationStatusRest",void 0),(0,c.Z)(this,"simpleCompanyResult",void 0),this.companyService=n,this.activatedRoute=a,this.router=i}ngOnInit(){this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.companyService.editCompany(this.companyUniqueId).subscribe(n=>{this.simpleCompanyResult=n,this.name=n.company.name,this.groups=n.companyAccessControl.groups})}saveChanges(){this.companyService.editFormCommitCompany(this.companyUniqueId,this.name,this.groups).subscribe(n=>{n.status===O.o.OK?this.back():this.operationStatusRest=n})}back(){this.router.navigate(["../../companies"],{relativeTo:this.activatedRoute})}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g),t.Y36(r.gz),t.Y36(r.F0))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["company-edit"]],decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["appearance","outline",2,"width","100%"],["matInput","matInput",3,"ngModel","ngModelChange"],["justify-content","flex-end","gap","unit(1)"],["mat-stroked-button","",3,"routerLink"],["mat-flat-button","","color","primary",3,"click"],[3,"content"]],template:function(n,a){1&n&&t.YNc(0,Yt,68,5,"app-ct-cols",0),2&n&&t.Q6J("ngIf",a.simpleCompanyResult)},dependencies:[d.O5,r.rH,f.U,C.n,M.t,J.W,x.i,T.Z,A.t,v.B,q.i,y._,k.R,U.zs,U.lW,Y.Nt,h.KE,h.hX,h.bx,u.Fj,u.JJ,u.On]})),e})();function Ot(e,o){1&e&&t.GkF(0)}function Ft(e,o){if(1&e&&(t.TgZ(0,"app-ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,Ot,1,0,"ng-container",18),t._uU(3,"\n                "),t.qZA()),2&e){t.oxw(2);const n=t.MAs(3);t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function Et(e,o){1&e&&(t.TgZ(0,"app-ct-section-header-row"),t._uU(1,"\n            "),t.TgZ(2,"app-ct-alert",19),t._uU(3,"\n                Management of accounts are disabled, assetMode is 'replicated'.\n            "),t.qZA(),t._uU(4,"\n        "),t.qZA())}function $t(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"ID "),t.qZA())}function jt(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.id," ")}}function Pt(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Is enabled "),t.qZA())}function Gt(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.enabled?"Yes":"No"," ")}}function Kt(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Login "),t.qZA())}function Ht(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.username," ")}}function zt(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Public name "),t.qZA())}function Wt(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.publicName," ")}}function Xt(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Roles"),t.qZA())}function Vt(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.roles," ")}}function tn(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Created On "),t.qZA())}function nn(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("\n                            ",t.xi3(2,1,n.createdOn,"HH:mm:ss, MMM\xa0d,\xa0yyyy")," ")}}function en(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1," "),t.qZA())}const on=function(e){return["../","account",e,"edit"]},an=function(e){return["../","account",e,"edit-roles"]},cn=function(e){return["../","account",e,"edit-password"]};function pn(e,o){if(1&e&&(t.TgZ(0,"app-ct-flex",23),t._uU(1,"\n                                "),t.TgZ(2,"app-ct-flex-item"),t._uU(3,"\n                                    "),t.TgZ(4,"a",24),t._uU(5," Edit"),t.qZA(),t._uU(6,"\n                                "),t.qZA(),t._uU(7,"\n                                "),t.TgZ(8,"app-ct-flex-item"),t._uU(9,"\n                                    "),t.TgZ(10,"a",24),t._uU(11,"Roles"),t.qZA(),t._uU(12,"\n                                "),t.qZA(),t._uU(13,"\n                                "),t.TgZ(14,"app-ct-flex-item"),t._uU(15,"\n                                    "),t.TgZ(16,"a",24),t._uU(17,"\n                                        Change Password"),t.qZA(),t._uU(18,"\n                                "),t.qZA(),t._uU(19,"\n                            "),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(4),t.Q6J("routerLink",t.VKq(3,on,n.id)),t.xp6(6),t.Q6J("routerLink",t.VKq(5,an,n.id)),t.xp6(6),t.Q6J("routerLink",t.VKq(7,cn,n.id))}}function sn(e,o){if(1&e&&(t.TgZ(0,"td",21),t._uU(1,"\n                            "),t.YNc(2,pn,20,9,"app-ct-flex",22),t._uU(3,"\n                        "),t.qZA()),2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.accountsResult.assetMode))}}function un(e,o){1&e&&(t.TgZ(0,"tr",25),t._uU(1," "),t.qZA())}function _n(e,o){1&e&&(t.TgZ(0,"tr",26),t._uU(1," "),t.qZA())}function ln(e,o){1&e&&t.GkF(0)}function rn(e,o){if(1&e&&(t.TgZ(0,"app-ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,ln,1,0,"ng-container",18),t._uU(3,"\n                "),t.qZA()),2&e){t.oxw(2);const n=t.MAs(3);t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function mn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-section"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-flex",2),t._uU(7,"\n                "),t.TgZ(8,"app-ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11,"Accounts"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n                "),t.YNc(14,Ft,4,1,"app-ct-flex-item",0),t._uU(15,"\n            "),t.qZA(),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n        "),t.YNc(18,Et,5,0,"app-ct-section-header-row",0),t._uU(19,"\n    "),t.qZA(),t._uU(20,"\n    "),t.TgZ(21,"app-ct-section-body"),t._uU(22,"\n        "),t.TgZ(23,"app-ct-section-body-row"),t._uU(24,"\n            "),t.TgZ(25,"ct-table",3),t._uU(26,"\n                "),t.TgZ(27,"table",4),t._uU(28,"\n                    "),t.ynx(29,5),t._uU(30,"\n                        "),t.YNc(31,$t,2,0,"th",6),t._uU(32,"\n                        "),t.YNc(33,jt,2,1,"td",7),t._uU(34,"\n                    "),t.BQk(),t._uU(35,"\n                    "),t.ynx(36,8),t._uU(37,"\n                        "),t.YNc(38,Pt,2,0,"th",6),t._uU(39,"\n                        "),t.YNc(40,Gt,2,1,"td",7),t._uU(41,"\n                    "),t.BQk(),t._uU(42,"\n                    "),t.ynx(43,9),t._uU(44,"\n                        "),t.YNc(45,Kt,2,0,"th",6),t._uU(46,"\n                        "),t.YNc(47,Ht,2,1,"td",7),t._uU(48,"\n                    "),t.BQk(),t._uU(49,"\n                    "),t.ynx(50,10),t._uU(51,"\n                        "),t.YNc(52,zt,2,0,"th",6),t._uU(53,"\n                        "),t.YNc(54,Wt,2,1,"td",7),t._uU(55,"\n                    "),t.BQk(),t._uU(56,"\n                    "),t.ynx(57,11),t._uU(58,"\n                        "),t.YNc(59,Xt,2,0,"th",6),t._uU(60,"\n                        "),t.YNc(61,Vt,2,1,"td",7),t._uU(62,"\n                    "),t.BQk(),t._uU(63,"\n                    "),t.ynx(64,12),t._uU(65,"\n                        "),t.YNc(66,tn,2,0,"th",6),t._uU(67,"\n                        "),t.YNc(68,nn,3,4,"td",7),t._uU(69,"\n                    "),t.BQk(),t._uU(70,"\n                    "),t.ynx(71,13),t._uU(72,"\n                        "),t.YNc(73,en,2,0,"th",6),t._uU(74,"\n                        "),t.YNc(75,sn,4,1,"td",7),t._uU(76,"\n                    "),t.BQk(),t._uU(77,"\n                    "),t.YNc(78,un,2,0,"tr",14),t._uU(79,"\n                    "),t.YNc(80,_n,2,0,"tr",15),t._uU(81,"\n                "),t.qZA(),t._uU(82,"\n            "),t.qZA(),t._uU(83,"\n        "),t.qZA(),t._uU(84,"\n    "),t.qZA(),t._uU(85,"\n    "),t.TgZ(86,"app-ct-section-footer"),t._uU(87,"\n        "),t.TgZ(88,"app-ct-section-footer-row"),t._uU(89,"\n            "),t.TgZ(90,"app-ct-flex",2),t._uU(91,"\n                "),t.TgZ(92,"app-ct-flex-item"),t._uU(93,"\n                    "),t.TgZ(94,"app-ct-flex",16),t._uU(95,"\n                        "),t.TgZ(96,"app-ct-table-pagination",17),t.NdJ("prev",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.prevPage())})("next",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.nextPage())}),t.qZA(),t._uU(97,"\n                    "),t.qZA(),t._uU(98,"\n                "),t.qZA(),t._uU(99,"\n                "),t.YNc(100,rn,4,1,"app-ct-flex-item",0),t._uU(101,"\n            "),t.qZA(),t._uU(102,"\n        "),t.qZA(),t._uU(103,"\n    "),t.qZA(),t._uU(104,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(14),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.accountsResult.assetMode)),t.xp6(4),t.Q6J("ngIf",n.dispatcherAssetModeService.isReplicated(n.accountsResult.assetMode)),t.xp6(7),t.Q6J("isWaiting",n.isLoading),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(51),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",n.columnsToDisplay),t.xp6(16),t.Q6J("pageableDefault",n.accountsResult.accounts),t.xp6(4),t.Q6J("ngIf",!n.dispatcherAssetModeService.isReplicated(n.accountsResult.assetMode))}}const dn=function(){return["../","account","add"]};function hn(e,o){1&e&&(t._uU(0,"\n    "),t.TgZ(1,"button",27),t._uU(2,"\n        Add New Account\n    "),t.qZA(),t._uU(3,"\n")),2&e&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,dn)))}let Un=(()=>{class e extends F.S{constructor(n,a,i,p){super(p),(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"dispatcherAssetModeService",void 0),(0,c.Z)(this,"authenticationService",void 0),(0,c.Z)(this,"dataSource",new _.by([])),(0,c.Z)(this,"columnsToDisplay",["id","isEnabled","login","publicName","role","createdOn","bts"]),(0,c.Z)(this,"accountsResult",void 0),(0,c.Z)(this,"companyUniqueId",void 0),this.companyService=n,this.activatedRoute=a,this.dispatcherAssetModeService=i,this.authenticationService=p}ngOnInit(){this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.updateTable(0)}updateTable(n){this.setIsLoadingStart(),this.companyService.accounts(n.toString(),this.companyUniqueId).subscribe({next:a=>{this.accountsResult=a,this.dataSource=new _.by(this.accountsResult.accounts.content||[])},complete:()=>{this.setIsLoadingEnd()}})}nextPage(){this.updateTable(this.accountsResult.accounts.number+1)}prevPage(){this.updateTable(this.accountsResult.accounts.number-1)}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g),t.Y36(r.gz),t.Y36(W.F),t.Y36(Z.$h))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["accounts"]],features:[t.qOj],decls:4,vars:1,consts:[[4,"ngIf"],["addButtonTemplate",""],["justify-content","space-between"],[3,"isWaiting"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","isEnabled"],["matColumnDef","login"],["matColumnDef","publicName"],["matColumnDef","role"],["matColumnDef","createdOn"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["justify-content","flex-start","gap","8px"],[3,"pageableDefault","prev","next"],[4,"ngTemplateOutlet"],["theme","info"],["mat-header-cell",""],["mat-cell",""],["justify-content","flex-end","gap","9px",4,"ngIf"],["justify-content","flex-end","gap","9px"],["mat-flat-button","","size","forTableRow","color","primary",3,"routerLink"],["mat-header-row",""],["mat-row",""],["mat-flat-button","","color","primary",3,"routerLink"]],template:function(n,a){1&n&&(t.YNc(0,mn,105,8,"app-ct-section",0),t._uU(1,"\n\n\n"),t.YNc(2,hn,4,2,"ng-template",null,1,t.W1O)),2&n&&t.Q6J("ngIf",a.accountsResult)},dependencies:[d.O5,d.tP,r.rH,f.U,C.n,S.V,N.R,j.a,x.i,T.Z,A.t,v.B,q.i,y._,P.C,X.v,U.zs,U.lW,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,d.uU]})),e})();const Zn=function(){return["../companies"]};let gn=(()=>{class e{constructor(n,a,i){(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"router",void 0),(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"operationStatusRest",void 0),(0,c.Z)(this,"form",new u.cw({name:new u.NI("",[u.kI.required,u.kI.minLength(1)])})),this.companyService=n,this.router=a,this.activatedRoute=i}createCompany(){this.companyService.addFormCommitCompany(this.form.value.name).subscribe(n=>{n.status===O.o.OK?this.back():this.operationStatusRest=n})}back(){this.router.navigate(["../","companies"],{relativeTo:this.activatedRoute})}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g),t.Y36(r.F0),t.Y36(r.gz))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["company-add"]],decls:56,vars:5,consts:[["size","6"],[3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","formControlName","name"],["justify-content","flex-end","gap","unit(1)"],["mat-stroked-button","",3,"routerLink"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"content"]],template:function(n,a){1&n&&(t.TgZ(0,"app-ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",0),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11,"New Company"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"app-ct-section-body",1),t._uU(16,"\n                "),t.TgZ(17,"app-ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"mat-form-field",2),t._uU(20,"\n                        "),t.TgZ(21,"mat-label"),t._uU(22,"Name of company"),t.qZA(),t._uU(23,"\n                        "),t._UZ(24,"input",3),t._uU(25,"\n                        "),t.TgZ(26,"mat-hint"),t._uU(27,"This is a required field."),t.qZA(),t._uU(28,"\n                    "),t.qZA(),t._uU(29,"\n                    "),t._UZ(30,"br"),t._uU(31,"\n                    "),t.TgZ(32,"app-ct-flex",4),t._uU(33,"\n                        "),t.TgZ(34,"app-ct-flex-item"),t._uU(35,"\n                            "),t.TgZ(36,"a",5),t._uU(37,"Cancel"),t.qZA(),t._uU(38,"\n                        "),t.qZA(),t._uU(39,"\n                        "),t.TgZ(40,"app-ct-flex-item"),t._uU(41,"\n                            "),t.TgZ(42,"button",6),t.NdJ("click",function(){return a.createCompany()}),t._uU(43,"Create\n                                Company"),t.qZA(),t._uU(44,"\n                        "),t.qZA(),t._uU(45,"\n                    "),t.qZA(),t._uU(46,"\n                "),t.qZA(),t._uU(47,"\n            "),t.qZA(),t._uU(48,"\n        "),t.qZA(),t._uU(49,"\n    "),t.qZA(),t._uU(50,"\n    "),t.TgZ(51,"app-ct-col",0),t._uU(52,"\n        "),t._UZ(53,"app-ct-rest-status",7),t._uU(54,"\n    "),t.qZA(),t._uU(55,"\n"),t.qZA()),2&n&&(t.xp6(15),t.Q6J("formGroup",a.form),t.xp6(21),t.Q6J("routerLink",t.DdM(4,Zn)),t.xp6(6),t.Q6J("disabled",a.form.invalid),t.xp6(11),t.Q6J("content",a.operationStatusRest))},dependencies:[r.rH,f.U,C.n,M.t,J.W,x.i,T.Z,A.t,v.B,q.i,y._,k.R,U.zs,U.lW,Y.Nt,h.KE,h.hX,h.bx,u.Fj,u.JJ,u.JL,u.sg,u.u]})),e})(),fn=(()=>{class e{constructor(n,a,i){(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"router",void 0),(0,c.Z)(this,"accountResult",void 0),(0,c.Z)(this,"companyUniqueId",void 0),(0,c.Z)(this,"operationStatusRest",void 0),(0,c.Z)(this,"isLoading",void 0),(0,c.Z)(this,"isDone",void 0),(0,c.Z)(this,"form",new u.cw({publicName:new u.NI("",[u.kI.required,u.kI.minLength(3)]),username:new u.NI("",[u.kI.required,u.kI.minLength(3)]),password:new u.NI("",[u.kI.required,u.kI.minLength(3)]),password2:new u.NI("",[u.kI.required,u.kI.minLength(3),p=>{const l=this.form;return l?l.value.password===p.value?null:{notSame:!0}:null}])})),this.activatedRoute=n,this.companyService=a,this.router=i}ngOnInit(){this.isDone=!1,this.isLoading=!0,this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.isLoading=!1}back(){this.router.navigate(["../../","accounts"],{relativeTo:this.activatedRoute})}createAccount(){this.isLoading=!0,this.companyService.addFormCommitNewAccount({username:this.form.value.username,password:this.form.value.password,password2:this.form.value.password2,publicName:this.form.value.publicName},this.companyUniqueId).subscribe({next:n=>this.operationStatusRest=n,complete:()=>{this.operationStatusRest.status===O.o.OK&&(this.isDone=!0,this.form.reset()),this.isLoading=!1}})}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(r.gz),t.Y36(g),t.Y36(r.F0))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["account-add"]],decls:109,vars:6,consts:[["align-items","baseline"],["size","6"],["novalidate","novalidate","autocomplete","off",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","type","text","autocomplete","name","formControlName","username"],["matInput","matInput","type","password","autocomplete","new-password","formControlName","password"],["matInput","matInput","type","password","autocomplete","new-password","formControlName","password2"],["matInput","matInput","type","text","autocomplete","name","formControlName","publicName"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"content"]],template:function(n,a){1&n&&(t.TgZ(0,"app-ct-cols",0),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11,"New Account"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"app-ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"app-ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"form",2),t._uU(20,"\n                        "),t.TgZ(21,"mat-form-field",3),t._uU(22,"\n                            "),t.TgZ(23,"mat-label"),t._uU(24,"Name"),t.qZA(),t._uU(25,"\n                            "),t._UZ(26,"input",4),t._uU(27,"\n                            "),t.TgZ(28,"mat-hint"),t._uU(29,"This is a required field."),t.qZA(),t._uU(30,"\n                        "),t.qZA(),t._uU(31,"\n                        "),t._UZ(32,"br"),t._uU(33,"\n                        "),t._UZ(34,"br"),t._uU(35,"\n                        "),t.TgZ(36,"mat-form-field",3),t._uU(37,"\n                            "),t.TgZ(38,"mat-label"),t._uU(39,"Password"),t.qZA(),t._uU(40,"\n                            "),t._UZ(41,"input",5),t._uU(42,"\n                            "),t.TgZ(43,"mat-hint"),t._uU(44,"This is a required field."),t.qZA(),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                        "),t._UZ(47,"br"),t._uU(48,"\n                        "),t._UZ(49,"br"),t._uU(50,"\n                        "),t.TgZ(51,"mat-form-field",3),t._uU(52,"\n                            "),t.TgZ(53,"mat-label"),t._uU(54,"Password again"),t.qZA(),t._uU(55,"\n                            "),t._UZ(56,"input",6),t._uU(57,"\n                            "),t.TgZ(58,"mat-hint"),t._uU(59,"This is a required field."),t.qZA(),t._uU(60,"\n                        "),t.qZA(),t._uU(61,"\n                        "),t._UZ(62,"br"),t._uU(63,"\n                        "),t._UZ(64,"br"),t._uU(65,"\n                        "),t.TgZ(66,"mat-form-field",3),t._uU(67,"\n                            "),t.TgZ(68,"mat-label"),t._uU(69,"Public Name"),t.qZA(),t._uU(70,"\n                            "),t._UZ(71,"input",7),t._uU(72,"\n                            "),t.TgZ(73,"mat-hint"),t._uU(74,"This is a required field."),t.qZA(),t._uU(75,"\n                        "),t.qZA(),t._uU(76,"\n                    "),t.qZA(),t._uU(77,"\n                "),t.qZA(),t._uU(78,"\n            "),t.qZA(),t._uU(79,"\n            "),t.TgZ(80,"app-ct-section-footer"),t._uU(81,"\n                "),t.TgZ(82,"app-ct-section-footer-row"),t._uU(83,"\n                    "),t.TgZ(84,"app-ct-flex",8),t._uU(85,"\n                        "),t.TgZ(86,"app-ct-flex-item"),t._uU(87,"\n                            "),t.TgZ(88,"button",9),t.NdJ("click",function(){return a.back()}),t._uU(89),t.ALo(90,"translate"),t.qZA(),t._uU(91,"\n                        "),t.qZA(),t._uU(92,"\n                        "),t.TgZ(93,"app-ct-flex-item"),t._uU(94,"\n                            "),t.TgZ(95,"button",10),t.NdJ("click",function(){return a.createAccount()}),t._uU(96,"Create Account"),t.qZA(),t._uU(97,"\n                        "),t.qZA(),t._uU(98,"\n                    "),t.qZA(),t._uU(99,"\n                "),t.qZA(),t._uU(100,"\n            "),t.qZA(),t._uU(101,"\n        "),t.qZA(),t._uU(102,"\n    "),t.qZA(),t._uU(103,"\n    "),t.TgZ(104,"app-ct-col",1),t._uU(105,"\n        "),t._UZ(106,"app-ct-rest-status",11),t._uU(107,"\n    "),t.qZA(),t._uU(108,"\n"),t.qZA()),2&n&&(t.xp6(19),t.Q6J("formGroup",a.form),t.xp6(70),t.hij("\n                                ",t.lcZ(90,4,"main.Cancel"),""),t.xp6(6),t.Q6J("disabled",a.isDone||a.isLoading||a.form.invalid),t.xp6(11),t.Q6J("content",a.operationStatusRest))},dependencies:[f.U,C.n,S.V,N.R,M.t,J.W,x.i,T.Z,A.t,v.B,q.i,y._,k.R,U.lW,Y.Nt,h.KE,h.hX,h.bx,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,R.X$]})),e})();var G=s(6709);function Cn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-cols",1),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",2),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"app-ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"app-ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"mat-form-field",3),t._uU(20,"\n                        "),t.TgZ(21,"mat-label"),t._uU(22,"Username"),t.qZA(),t._uU(23,"\n                        "),t._UZ(24,"input",4),t._uU(25,"\n                    "),t.qZA(),t._uU(26,"\n                    "),t.TgZ(27,"mat-form-field",5),t._uU(28,"\n                        "),t.TgZ(29,"mat-label"),t._uU(30,"Public Name"),t.qZA(),t._uU(31,"\n                        "),t.TgZ(32,"input",6),t.NdJ("ngModelChange",function(i){t.CHM(n);const p=t.oxw();return t.KtG(p.publicName=i)}),t.qZA(),t._uU(33,"\n                    "),t.qZA(),t._uU(34,"\n                    "),t._UZ(35,"br"),t._uU(36,"\n                    "),t.TgZ(37,"mat-checkbox",7),t.NdJ("ngModelChange",function(i){t.CHM(n);const p=t.oxw();return t.KtG(p.isEnabled=i)}),t._uU(38,"Is account enabled?"),t.qZA(),t._uU(39,"\n                "),t.qZA(),t._uU(40,"\n            "),t.qZA(),t._uU(41,"\n            "),t.TgZ(42,"app-ct-section-footer"),t._uU(43,"\n                "),t.TgZ(44,"app-ct-section-footer-row"),t._uU(45,"\n                    "),t.TgZ(46,"app-ct-flex",8),t._uU(47,"\n                        "),t.TgZ(48,"app-ct-flex-item"),t._uU(49,"\n                            "),t.TgZ(50,"button",9),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.back())}),t._uU(51),t.ALo(52,"translate"),t.qZA(),t._uU(53,"\n                        "),t.qZA(),t._uU(54,"\n                        "),t.TgZ(55,"app-ct-flex-item"),t._uU(56,"\n                            "),t.TgZ(57,"button",10),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.saveChanges())}),t._uU(58,"Save Changes"),t.qZA(),t._uU(59,"\n                        "),t.qZA(),t._uU(60,"\n                    "),t.qZA(),t._uU(61,"\n                "),t.qZA(),t._uU(62,"\n            "),t.qZA(),t._uU(63,"\n        "),t.qZA(),t._uU(64,"\n    "),t.qZA(),t._uU(65,"\n    "),t.TgZ(66,"app-ct-col",2),t._uU(67,"\n        "),t._UZ(68,"app-ct-rest-status",11),t._uU(69,"\n    "),t.qZA(),t._uU(70,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(11),t.hij("Edit Account #",n.accountId," "),t.xp6(13),t.Q6J("value",n.accountResult.account.username),t.xp6(8),t.Q6J("ngModel",n.publicName),t.xp6(5),t.Q6J("ngModel",n.isEnabled),t.xp6(14),t.Oqu(t.lcZ(52,5,"main.Cancel"))}}let xn=(()=>{class e{constructor(n,a,i){(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"router",void 0),(0,c.Z)(this,"companyUniqueId",void 0),(0,c.Z)(this,"accountId",void 0),(0,c.Z)(this,"accountResult",void 0),(0,c.Z)(this,"operationStatusRest",void 0),(0,c.Z)(this,"isEnabled",void 0),(0,c.Z)(this,"publicName",void 0),(0,c.Z)(this,"username",void 0),this.companyService=n,this.activatedRoute=a,this.router=i}ngOnInit(){this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.accountId=this.activatedRoute.snapshot.paramMap.get("accountId"),this.companyService.edit(this.companyUniqueId,this.accountId).subscribe(n=>{this.accountResult=n,this.username=n.account.username,this.publicName=n.account.publicName,this.isEnabled=n.account.enabled})}back(){this.router.navigate(["../../../","accounts"],{relativeTo:this.activatedRoute})}saveChanges(){this.companyService.editFormCommit(this.accountId,this.publicName,this.isEnabled,this.companyUniqueId).subscribe(n=>{n.status===O.o.OK?this.back():this.operationStatusRest=n})}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g),t.Y36(r.gz),t.Y36(r.F0))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["account-edit"]],decls:1,vars:1,consts:[["align-items","baseline",4,"ngIf"],["align-items","baseline"],["size","6"],["appearance","outline","disabled","",2,"width","100%"],["matInput","","disabled","",3,"value"],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","",3,"click"],["mat-flat-button","","color","primary",3,"click"],[3,"content"]],template:function(n,a){1&n&&t.YNc(0,Cn,71,7,"app-ct-cols",0),2&n&&t.Q6J("ngIf",a.accountResult)},dependencies:[d.O5,f.U,C.n,S.V,N.R,M.t,J.W,x.i,T.Z,A.t,v.B,q.i,y._,k.R,U.lW,G.oG,Y.Nt,h.KE,h.hX,u.Fj,u.JJ,u.On,R.X$]})),e})();function Tn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-cols",1),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",2),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11,"Edit Account "),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"app-ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"app-ct-section-body-row"),t._uU(18,"\n                    "),t.TgZ(19,"form",3),t._uU(20,"\n                        "),t.TgZ(21,"mat-form-field",4),t._uU(22,"\n                            "),t.TgZ(23,"mat-label"),t._uU(24,"Password"),t.qZA(),t._uU(25,"\n                            "),t._UZ(26,"input",5),t._uU(27,"\n                            "),t.TgZ(28,"mat-hint"),t._uU(29,"This is a required field."),t.qZA(),t._uU(30,"\n                        "),t.qZA(),t._uU(31,"\n                        "),t._UZ(32,"br"),t._uU(33,"\n                        "),t._UZ(34,"br"),t._uU(35,"\n                        "),t.TgZ(36,"mat-form-field",4),t._uU(37,"\n                            "),t.TgZ(38,"mat-label"),t._uU(39,"Password again"),t.qZA(),t._uU(40,"\n                            "),t._UZ(41,"input",6),t._uU(42,"\n                            "),t.TgZ(43,"mat-hint"),t._uU(44,"This is a required field."),t.qZA(),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                    "),t.qZA(),t._uU(47,"\n                "),t.qZA(),t._uU(48,"\n            "),t.qZA(),t._uU(49,"\n            "),t.TgZ(50,"app-ct-section-footer"),t._uU(51,"\n                "),t.TgZ(52,"app-ct-section-footer-row"),t._uU(53,"\n                    "),t.TgZ(54,"app-ct-flex",7),t._uU(55,"\n                        "),t.TgZ(56,"app-ct-flex-item"),t._uU(57,"\n                            "),t.TgZ(58,"button",8),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.back())}),t._uU(59),t.ALo(60,"translate"),t.qZA(),t._uU(61,"\n                        "),t.qZA(),t._uU(62,"\n                        "),t.TgZ(63,"app-ct-flex-item"),t._uU(64,"\n                            "),t.TgZ(65,"button",9),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.saveChanges())}),t._uU(66,"Save"),t.qZA(),t._uU(67,"\n                        "),t.qZA(),t._uU(68,"\n                    "),t.qZA(),t._uU(69,"\n                "),t.qZA(),t._uU(70,"\n            "),t.qZA(),t._uU(71,"\n        "),t.qZA(),t._uU(72,"\n    "),t.qZA(),t._uU(73,"\n    "),t.TgZ(74,"app-ct-col",2),t._uU(75,"\n        "),t._UZ(76,"app-ct-rest-status",10),t._uU(77,"\n    "),t.qZA(),t._uU(78,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(19),t.Q6J("formGroup",n.form),t.xp6(40),t.Oqu(t.lcZ(60,4,"main.Cancel")),t.xp6(6),t.Q6J("disabled",n.isLoading),t.xp6(11),t.Q6J("content",n.operationStatusRest)}}let An=(()=>{class e{constructor(n,a,i){(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"router",void 0),(0,c.Z)(this,"accountResult",void 0),(0,c.Z)(this,"accoundId",void 0),(0,c.Z)(this,"companyUniqueId",void 0),(0,c.Z)(this,"operationStatusRest",void 0),(0,c.Z)(this,"form",new u.cw({password:new u.NI("",[u.kI.required,u.kI.minLength(3)]),password2:new u.NI("",[u.kI.required,u.kI.minLength(3),p=>{const l=this.form;return l?l.value.password===p.value?null:{notSame:!0}:null}])})),(0,c.Z)(this,"isLoading",void 0),this.activatedRoute=n,this.companyService=a,this.router=i}ngOnInit(){this.isLoading=!0,this.accoundId=this.activatedRoute.snapshot.paramMap.get("accountId"),this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.companyService.passwordEdit(this.accoundId,this.companyUniqueId).subscribe({next:n=>this.accountResult=n,complete:()=>this.isLoading=!1})}back(){this.router.navigate(["../../../","accounts"],{relativeTo:this.activatedRoute})}saveChanges(){this.isLoading=!0,this.companyService.passwordEditFormCommit(this.accoundId,this.form.value.password,this.form.value.password2,this.companyUniqueId).subscribe({next:n=>this.operationStatusRest=n,complete:()=>this.isLoading=!1})}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(r.gz),t.Y36(g),t.Y36(r.F0))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["account-edit-password"]],decls:1,vars:1,consts:[["align-items","baseline",4,"ngIf"],["align-items","baseline"],["size","6"],["novalidate","novalidate","autocomplete","off",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","matInput","type","password","autocomplete","new-password","formControlName","password"],["matInput","matInput","type","password","autocomplete","new-password","formControlName","password2"],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"content"]],template:function(n,a){1&n&&t.YNc(0,Tn,79,6,"app-ct-cols",0),2&n&&t.Q6J("ngIf",a.accountResult)},dependencies:[d.O5,f.U,C.n,S.V,N.R,M.t,J.W,x.i,T.Z,A.t,v.B,q.i,y._,k.R,U.lW,Y.Nt,h.KE,h.hX,h.bx,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,R.X$]})),e})();function yn(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",4),t._uU(1,"\n                        "),t.TgZ(2,"mat-checkbox",5),t.NdJ("ngModelChange",function(i){const l=t.CHM(n).$implicit;return t.KtG(l.value=i)})("change",function(){const p=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.save(p))}),t._uU(3),t.qZA(),t._uU(4,"\n                    "),t.qZA()}if(2&e){const n=o.$implicit,a=t.oxw(2);t.xp6(2),t.Q6J("ngModel",n.value)("disabled",a.isLoading),t.xp6(1),t.hij("",n.key,"\n                        ")}}function bn(e,o){if(1&e&&(t.TgZ(0,"app-ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"app-ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"app-ct-section-body-row"),t._uU(18,"\n                    "),t.YNc(19,yn,5,3,"div",2),t.ALo(20,"keyvalue"),t._uU(21,"\n                "),t.qZA(),t._uU(22,"\n            "),t.qZA(),t._uU(23,"\n        "),t.qZA(),t._uU(24,"\n    "),t.qZA(),t._uU(25,"\n    "),t.TgZ(26,"app-ct-col",1),t._uU(27,"\n        "),t._UZ(28,"app-ct-rest-status",3),t._uU(29,"\n    "),t.qZA(),t._uU(30,"\n"),t.qZA()),2&e){const n=t.oxw();t.xp6(11),t.hij("\n                        Edit Account #",n.accountId," Roles\n                    "),t.xp6(8),t.Q6J("ngForOf",t.lcZ(20,3,n.roleModel)),t.xp6(9),t.Q6J("content",n.operationStatusRest)}}let vn=(()=>{class e{constructor(n,a){(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"accountId",void 0),(0,c.Z)(this,"companyUniqueId",void 0),(0,c.Z)(this,"accountWithRoleResult",void 0),(0,c.Z)(this,"operationStatusRest",void 0),(0,c.Z)(this,"roleModel",new Map),(0,c.Z)(this,"isLoading",void 0),this.companyService=n,this.activatedRoute=a}ngOnInit(){this.isLoading=!0,this.accountId=this.activatedRoute.snapshot.paramMap.get("accountId"),this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.companyService.editRoles(this.accountId,this.companyUniqueId).subscribe(n=>{this.accountWithRoleResult=n,this.accountWithRoleResult.possibleRoles.forEach(a=>this.roleModel.set(a,!1)),this.accountWithRoleResult.account.authorities.forEach(a=>{this.roleModel.has(a.authority)&&this.roleModel.set(a.authority,!0)}),this.isLoading=!1})}save(n){this.isLoading=!0,this.companyService.rolesEditFormCommit(this.accountId,n.key,n.value,this.companyUniqueId).subscribe(a=>{this.operationStatusRest=a,this.isLoading=!1})}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g),t.Y36(r.gz))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["account-edit-roles"]],decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["style","margin: 0.5em 0",4,"ngFor","ngForOf"],[3,"content"],[2,"margin","0.5em 0"],[3,"ngModel","disabled","ngModelChange","change"]],template:function(n,a){1&n&&t.YNc(0,bn,31,5,"app-ct-cols",0),2&n&&t.Q6J("ngIf",a.accountWithRoleResult)},dependencies:[d.sg,d.O5,f.U,C.n,M.t,J.W,x.i,T.Z,A.t,y._,k.R,G.oG,u.JJ,u.On,d.Nd]})),e})();var qn=s(4853);function wn(e,o){if(1&e&&(t.TgZ(0,"app-ct-section"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-heading"),t._uU(7),t.qZA(),t._uU(8,"\n        "),t.qZA(),t._uU(9,"\n    "),t.qZA(),t._uU(10,"\n    "),t.TgZ(11,"app-ct-section-body"),t._uU(12,"\n        "),t.TgZ(13,"app-ct-section-body-row"),t._uU(14,"\n            "),t.TgZ(15,"app-ct-pre"),t._uU(16),t.qZA(),t._uU(17,"\n        "),t.qZA(),t._uU(18,"\n    "),t.qZA(),t._uU(19,"\n"),t.qZA()),2&e){const n=t.oxw();t.xp6(7),t.hij("Batch #",null==n.batchDataStatus?null:n.batchDataStatus.batchId,""),t.xp6(9),t.Oqu(null==n.batchDataStatus?null:n.batchDataStatus.console)}}let In=(()=>{class e{constructor(n,a){(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"isLoading",void 0),(0,c.Z)(this,"companyUniqueId",void 0),(0,c.Z)(this,"batchId",void 0),(0,c.Z)(this,"batchDataStatus",void 0),this.companyService=n,this.activatedRoute=a}ngOnInit(){this.isLoading=!0,this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.batchId=this.activatedRoute.snapshot.paramMap.get("batchId"),this.companyService.getBatchStatus(this.companyUniqueId,this.batchId).subscribe({next:n=>this.batchDataStatus=n,error:()=>this.isLoading=!1,complete:()=>this.isLoading=!1})}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g),t.Y36(r.gz))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["app-company-batch-status"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(n,a){1&n&&t.YNc(0,wn,20,2,"app-ct-section",0),2&n&&t.Q6J("ngIf",!a.isLoading)},dependencies:[d.O5,qn.Q,f.U,C.n,x.i,T.Z,A.t,y._]})),e})();var Rn=s(1099),Sn=s(2587),Nn=s(3238),Mn=s(4385);const Jn=["fileUpload"];function kn(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1,"\n                                "),t.TgZ(2,"mat-option",11),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("value",n),t.xp6(1),t.Oqu(n.uid)}}function Ln(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\n                "),t.qZA(),t._uU(14,"\n            "),t.qZA(),t._uU(15,"\n            "),t.TgZ(16,"app-ct-section-body"),t._uU(17,"\n                "),t.TgZ(18,"app-ct-section-body-row"),t._uU(19,"\n                    "),t.TgZ(20,"mat-form-field",2),t._uU(21,"\n                        "),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._uU(25,"\n                        "),t.TgZ(26,"mat-select",3),t.NdJ("ngModelChange",function(i){t.CHM(n);const p=t.oxw();return t.KtG(p.sourceCode=i)}),t._uU(27,"\n                            "),t.YNc(28,kn,5,2,"div",4),t._uU(29,"\n                        "),t.qZA(),t._uU(30,"\n                        "),t.TgZ(31,"mat-hint"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._uU(34,"\n                    "),t.qZA(),t._uU(35,"\n\n                    "),t._UZ(36,"br"),t._uU(37,"\n                    "),t._UZ(38,"br"),t._uU(39,"\n\n                    "),t.TgZ(40,"div"),t._uU(41,"\n                        "),t.TgZ(42,"app-ct-file-upload",5,6),t.NdJ("changed",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.fileUploadChanged())}),t.ALo(44,"translate"),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                        "),t.TgZ(47,"app-ct-hint"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._uU(50,"\n                        "),t.TgZ(51,"app-ct-hint"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._uU(54,"\n                    "),t.qZA(),t._uU(55,"\n                "),t.qZA(),t._uU(56,"\n            "),t.qZA(),t._uU(57,"\n            "),t.TgZ(58,"app-ct-section-footer"),t._uU(59,"\n                "),t.TgZ(60,"app-ct-section-footer-row"),t._uU(61,"\n                    "),t.TgZ(62,"app-ct-flex",7),t._uU(63,"\n                        "),t.TgZ(64,"app-ct-flex-item"),t._uU(65,"\n                            "),t.TgZ(66,"button",8),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.back())}),t._uU(67),t.ALo(68,"translate"),t.qZA(),t._uU(69,"\n                        "),t.qZA(),t._uU(70,"\n                        "),t.TgZ(71,"app-ct-flex-item"),t._uU(72,"\n                            "),t.TgZ(73,"button",9),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.upload())}),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._uU(76,"\n                        "),t.qZA(),t._uU(77,"\n                    "),t.qZA(),t._uU(78,"\n                "),t.qZA(),t._uU(79,"\n            "),t.qZA(),t._uU(80,"\n        "),t.qZA(),t._uU(81,"\n    "),t.qZA(),t._uU(82,"\n    "),t.TgZ(83,"app-ct-col",1),t._uU(84,"\n        "),t._UZ(85,"app-ct-rest-status",10),t._uU(86,"\n    "),t.qZA(),t._uU(87,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(11),t.Oqu(t.lcZ(12,12,"batch-add.Upload file for processing")),t.xp6(12),t.hij(" ",t.lcZ(24,14,"batch-add.List of Source Codes"),""),t.xp6(3),t.Q6J("ngModel",n.sourceCode),t.xp6(2),t.Q6J("ngForOf",n.sourceCodesForCompany.items),t.xp6(4),t.Oqu(t.lcZ(33,16,"batch-add.This is a required field.")),t.xp6(10),t.s9C("buttonTitle",t.lcZ(44,18,"batch-add.Select File")),t.xp6(6),t.Oqu(t.lcZ(49,20,"batch-add.This is a required field.")),t.xp6(4),t.Oqu(t.lcZ(53,22,"batch-add.Only .xml and .zip files are supported")),t.xp6(15),t.hij("\n                                ",t.lcZ(68,24,"batch-add.Cancel"),""),t.xp6(6),t.Q6J("disabled",!n.sourceCode||!n.file),t.xp6(1),t.hij(" ",t.lcZ(75,26,"batch-add.Upload-File-button"),""),t.xp6(11),t.Q6J("content",n.batchDataUploadingStatus)}}let Bn=(()=>{class e{constructor(n,a,i){(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"router",void 0),(0,c.Z)(this,"fileUpload",void 0),(0,c.Z)(this,"batchId",void 0),(0,c.Z)(this,"companyUniqueId",void 0),(0,c.Z)(this,"sourceCodesForCompany",void 0),(0,c.Z)(this,"sourceCode",void 0),(0,c.Z)(this,"file",void 0),(0,c.Z)(this,"batchDataUploadingStatus",void 0),this.companyService=n,this.activatedRoute=a,this.router=i}ngOnInit(){this.batchId=this.activatedRoute.snapshot.paramMap.get("batchId"),this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.companyService.sourceCodesForCompany(this.companyUniqueId).subscribe(n=>{this.sourceCodesForCompany=n})}fileUploadChanged(){this.file=this.fileUpload.fileInput.nativeElement.files[0]||!1}upload(){this.companyService.uploadFile(this.companyUniqueId,this.sourceCode.id.toString(),this.file).subscribe(n=>{this.batchDataUploadingStatus=n})}back(){this.router.navigate(["../"],{relativeTo:this.activatedRoute})}}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g),t.Y36(r.gz),t.Y36(r.F0))}),(0,c.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["app-company-batch-upload"]],viewQuery:function(n,a){if(1&n&&t.Gf(Jn,5),2&n){let i;t.iGM(i=t.CRH())&&(a.fileUpload=i.first)}},decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["appearance","outline",2,"width","100%"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["acceptTypes",".zip, .xml",3,"buttonTitle","changed"],["fileUpload",""],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"content"],[3,"value"]],template:function(n,a){1&n&&t.YNc(0,Ln,88,28,"app-ct-cols",0),2&n&&t.Q6J("ngIf",a.sourceCodesForCompany)},dependencies:[d.sg,d.O5,f.U,C.n,S.V,N.R,M.t,J.W,Rn.E,x.i,T.Z,A.t,v.B,q.i,y._,Sn.C,k.R,Nn.ey,U.lW,h.KE,h.hX,h.bx,Mn.gD,u.JJ,u.On,R.X$]})),e})();var B=s(7520),V=s(9272),K=s(5986),Qn=s(5017),Yn=s(7318),Dn=s(5938),On=s(7392),tt=function(e,o,n,a){var l,i=arguments.length,p=i<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(e,o,n,a);else for(var w=e.length-1;w>=0;w--)(l=e[w])&&(p=(i<3?l(p):i>3?l(o,n,p):l(o,n))||p);return i>3&&p&&Object.defineProperty(o,n,p),p},Q=function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)};function Fn(e,o){1&e&&t.GkF(0)}function En(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"th",20),t._uU(1,"\n                            "),t.TgZ(2,"mat-checkbox",21),t.NdJ("change",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.masterToggle())}),t._uU(3,"\n                                "),t._UZ(4,"div",22),t._uU(5,"\n                            "),t.qZA(),t._uU(6,"\n                        "),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(2),t.Q6J("checked",n.selection.hasValue()&&n.isAllSelected())("indeterminate",n.selection.hasValue()&&!n.isAllSelected())}}function $n(e,o){if(1&e){const n=t.EpF();t.ynx(0),t._uU(1,"\n                                "),t.TgZ(2,"mat-checkbox",24),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(){t.CHM(n);const i=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.selection.toggle(i))}),t._uU(3,"\n                                    "),t._UZ(4,"div",22),t._uU(5,"\n                                "),t.qZA(),t._uU(6,"\n                            "),t.BQk()}if(2&e){const n=t.oxw().$implicit,a=t.oxw(2);t.xp6(2),t.Q6J("checked",a.selection.isSelected(n))}}function jn(e,o){1&e&&(t.ynx(0),t._uU(1,"\n                                "),t.TgZ(2,"mat-checkbox",25),t._uU(3,"\n                                    "),t._UZ(4,"div",22),t._uU(5,"\n                                "),t.qZA(),t._uU(6,"\n                            "),t.BQk())}function Pn(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1,"\n                            "),t.YNc(2,$n,7,1,"ng-container",0),t._uU(3,"\n                   \n                            "),t.YNc(4,jn,7,0,"ng-container",0),t._uU(5,"\n                   \n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",n.batch.deleted),t.xp6(2),t.Q6J("ngIf",!n.batch.deleted)}}function Gn(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"ID"),t.qZA())}function Kn(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.batch.id," ")}}function Hn(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Created on "),t.qZA())}function zn(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("\n                            ",t.xi3(2,1,n.batch.createdOn,"MMM d, yyyy, HH:mm:ss")," ")}}function Wn(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Is batch consistent?"),t.qZA())}function Xn(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.isBatchConsistent.true")))}function Vn(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.isBatchConsistent.false")))}function te(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1," "),t.YNc(2,Xn,3,3,"span",0),t.YNc(3,Vn,3,3,"span",0),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",n.ok),t.xp6(1),t.Q6J("ngIf",!n.ok)}}function ne(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Is deleted? "),t.qZA())}function ee(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.batch.deleted," ")}}function oe(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"\n                            "),t.TgZ(2,"div",26),t._uU(3,"Source Code"),t.qZA(),t._uU(4,"\n                            "),t.TgZ(5,"div",26),t._uU(6,"File Name"),t.qZA(),t._uU(7,"\n                        "),t.qZA())}function ae(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1,"\n                            "),t.TgZ(2,"div",26),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.TgZ(5,"div",26),t._uU(6),t.qZA(),t._uU(7,"\n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(3),t.Oqu(n.sourceCodeUid),t.xp6(3),t.Oqu(n.uploadedFileName)}}function ce(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Exec State"),t.qZA())}function ie(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Error"),t.qZA())}function pe(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Preparing"),t.qZA())}function se(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Processing"),t.qZA())}function ue(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1,"Finished"),t.qZA())}function _e(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1,"\n                            "),t.YNc(2,ie,2,0,"span",0),t._uU(3,"\n                            "),t.YNc(4,pe,2,0,"span",0),t._uU(5,"\n                            "),t.YNc(6,se,2,0,"span",0),t._uU(7,"\n                            "),t.YNc(8,ue,2,0,"span",0),t._uU(9,"\n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",-1===n.execState),t.xp6(2),t.Q6J("ngIf",2===n.execState),t.xp6(2),t.Q6J("ngIf",3===n.execState),t.xp6(2),t.Q6J("ngIf",4===n.execState)}}function le(e,o){1&e&&(t.TgZ(0,"th",20),t._uU(1," "),t.qZA())}function re(e,o){if(1&e){const n=t.EpF();t.ynx(0),t._uU(1,"\n                                    "),t.TgZ(2,"app-ct-flex-item"),t._uU(3,"\n                                        "),t.TgZ(4,"button",31),t.NdJ("click",function(){t.CHM(n);const i=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.deleteOne(i))}),t._uU(5,"\n                                            "),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t._uU(8,"\n                                        "),t.qZA(),t._uU(9,"\n                                    "),t.qZA(),t._uU(10,"\n                                "),t.BQk()}if(2&e){const n=t.oxw().$implicit,a=t.oxw(2);t.xp6(4),t.Q6J("disabled",!(n.batch.deleted&&a.isFinished(n)))}}const me=function(e){return["../","batch",e]};function de(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",23),t._uU(1,"\n                            "),t.TgZ(2,"app-ct-flex",27),t._uU(3,"\n                                "),t.TgZ(4,"app-ct-flex-item"),t._uU(5,"\n                                    "),t.TgZ(6,"button",28),t._uU(7,"Status"),t.qZA(),t._uU(8,"\n                                "),t.qZA(),t._uU(9,"\n                                "),t.TgZ(10,"app-ct-flex-item"),t._uU(11,"\n                                    "),t.TgZ(12,"button",29),t.NdJ("click",function(){const p=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.downloadResult(p))}),t._uU(13,"\n                                        Result\n                                    "),t.qZA(),t._uU(14,"\n                                "),t.qZA(),t._uU(15,"\n                                "),t.TgZ(16,"app-ct-flex-item"),t._uU(17,"\n                                    "),t.TgZ(18,"button",30),t.NdJ("click",function(){const p=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.downloadOriginFile(p))}),t._uU(19,"\n                                        Origin File\n                                    "),t.qZA(),t._uU(20,"\n                                "),t.qZA(),t._uU(21,"\n                                "),t.YNc(22,re,11,1,"ng-container",0),t._uU(23,"\n                   \n                            "),t.qZA(),t._uU(24,"\n                        "),t.qZA()}if(2&e){const n=o.$implicit,a=t.oxw(2);t.xp6(6),t.Q6J("routerLink",t.VKq(4,me,n.batch.id))("disabled",!a.isFinished(n)||a.isExecContextDeleted(n)),t.xp6(6),t.Q6J("disabled",!a.isFinished(n)||a.isExecContextDeleted(n)),t.xp6(10),t.Q6J("ngIf",a.isRole.MainOperator)}}function he(e,o){1&e&&t._UZ(0,"tr",32)}function Ue(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr",33),t.NdJ("click",function(){const p=t.CHM(n).$implicit,l=t.oxw(2);return t.KtG(l.checkAndToggleRowSeletion(p))}),t.qZA()}if(2&e){const n=o.$implicit,a=t.oxw(2);t.ekj("selected-color",a.downloadSelector.isSelected(n))}}function Ze(e,o){if(1&e){const n=t.EpF();t.ynx(0),t._uU(1,"\n            "),t.TgZ(2,"app-ct-section-footer-row"),t._uU(3,"\n                "),t.TgZ(4,"button",34),t.NdJ("click",function(){t.CHM(n);const i=t.oxw(2);return t.KtG(i.deleteMany())}),t._uU(5,"\n                    Delete Checked\n                "),t.qZA(),t._uU(6,"\n            "),t.qZA(),t._uU(7,"\n        "),t.BQk()}if(2&e){const n=t.oxw(2);t.xp6(4),t.Q6J("disabled",n.isLoading||0===n.selection.selected.length)}}function ge(e,o){1&e&&t.GkF(0)}function fe(e,o){if(1&e&&(t.ynx(0),t._uU(1,"\n                    "),t.TgZ(2,"app-ct-flex-item"),t._uU(3,"\n                        "),t.YNc(4,ge,1,0,"ng-container",4),t._uU(5,"\n                    "),t.qZA(),t._uU(6,"\n                "),t.BQk()),2&e){t.oxw(2);const n=t.MAs(3);t.xp6(4),t.Q6J("ngTemplateOutlet",n)}}function Ce(e,o){1&e&&t.GkF(0)}function xe(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-section"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-flex",3),t._uU(7,"\n                "),t.TgZ(8,"app-ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11," Batch "),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n                "),t.TgZ(14,"app-ct-flex-item"),t._uU(15,"\n                    "),t.YNc(16,Fn,1,0,"ng-container",4),t._uU(17,"\n                "),t.qZA(),t._uU(18,"\n            "),t.qZA(),t._uU(19,"\n        "),t.qZA(),t._uU(20,"\n    "),t.qZA(),t._uU(21,"\n    "),t.TgZ(22,"app-ct-section-body"),t._uU(23,"\n        "),t.TgZ(24,"app-ct-section-body-row"),t._uU(25,"\n            "),t.TgZ(26,"ct-table",5),t._uU(27,"\n                "),t.TgZ(28,"table",6),t._uU(29,"\n                    "),t.ynx(30,7),t._uU(31,"\n                        "),t.YNc(32,En,7,2,"th",8),t._uU(33,"\n                        "),t.YNc(34,Pn,6,2,"td",9),t._uU(35,"\n                    "),t.BQk(),t._uU(36,"\n                   \n                    "),t.ynx(37,10),t._uU(38,"\n                        "),t.YNc(39,Gn,2,0,"th",8),t._uU(40,"\n                        "),t.YNc(41,Kn,2,1,"td",9),t._uU(42,"\n                    "),t.BQk(),t._uU(43,"\n                   \n                    "),t.ynx(44,11),t._uU(45,"\n                        "),t.YNc(46,Hn,2,0,"th",8),t._uU(47,"\n                        "),t.YNc(48,zn,3,4,"td",9),t._uU(49,"\n                    "),t.BQk(),t._uU(50,"\n                   \n                    "),t.ynx(51,12),t._uU(52,"\n                        "),t.YNc(53,Wn,2,0,"th",8),t._uU(54,"\n                        "),t.YNc(55,te,4,2,"td",9),t._uU(56,"\n                    "),t.BQk(),t._uU(57,"\n                   \n                    "),t.ynx(58,13),t._uU(59,"\n                        "),t.YNc(60,ne,2,0,"th",8),t._uU(61,"\n                        "),t.YNc(62,ee,2,1,"td",9),t._uU(63,"\n                    "),t.BQk(),t._uU(64,"\n                   \n                    "),t.ynx(65,14),t._uU(66,"\n                        "),t.YNc(67,oe,8,0,"th",8),t._uU(68,"\n                        "),t.YNc(69,ae,8,2,"td",9),t._uU(70,"\n                    "),t.BQk(),t._uU(71,"\n                   \n                    "),t.ynx(72,15),t._uU(73,"\n                        "),t.YNc(74,ce,2,0,"th",8),t._uU(75,"\n                        "),t.YNc(76,_e,10,4,"td",9),t._uU(77,"\n                    "),t.BQk(),t._uU(78,"\n                   \n                    "),t.ynx(79,16),t._uU(80,"\n                        "),t.YNc(81,le,2,0,"th",8),t._uU(82,"\n                        "),t.YNc(83,de,25,6,"td",9),t._uU(84,"\n                    "),t.BQk(),t._uU(85,"\n                   \n                    "),t.YNc(86,he,1,0,"tr",17),t._uU(87,"\n                    "),t.YNc(88,Ue,1,2,"tr",18),t._uU(89,"\n                "),t.qZA(),t._uU(90,"\n            "),t.qZA(),t._uU(91,"\n        "),t.qZA(),t._uU(92,"\n    "),t.qZA(),t._uU(93,"\n    "),t.TgZ(94,"app-ct-section-footer"),t._uU(95,"\n        "),t.YNc(96,Ze,8,1,"ng-container",0),t._uU(97,"\n        "),t.TgZ(98,"app-ct-section-footer-row"),t._uU(99,"\n            "),t.TgZ(100,"app-ct-flex",3),t._uU(101,"\n                "),t.TgZ(102,"app-ct-flex-item"),t._uU(103,"\n                    "),t.TgZ(104,"app-ct-table-pagination",19),t.NdJ("prev",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.prevPage())})("next",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.nextPage())}),t.qZA(),t._uU(105,"\n                "),t.qZA(),t._uU(106,"\n\n                "),t.YNc(107,fe,7,1,"ng-container",0),t._uU(108,"\n\n                "),t.TgZ(109,"app-ct-flex-item"),t._uU(110,"\n                    "),t.YNc(111,Ce,1,0,"ng-container",4),t._uU(112,"\n                "),t.qZA(),t._uU(113,"\n            "),t.qZA(),t._uU(114,"\n        "),t.qZA(),t._uU(115,"\n    "),t.qZA(),t._uU(116,"\n"),t.qZA()}if(2&e){const n=t.oxw(),a=t.MAs(6);t.xp6(16),t.Q6J("ngTemplateOutlet",a),t.xp6(10),t.Q6J("isWaiting",n.isLoading),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(58),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",n.columnsToDisplay),t.xp6(8),t.Q6J("ngIf",n.isRole.MainOperator),t.xp6(8),t.Q6J("pageableDefault",n.batchesResult.batches),t.xp6(3),t.Q6J("ngIf",n.downloadSelector.size>0),t.xp6(4),t.Q6J("ngTemplateOutlet",a)}}function Te(e,o){if(1&e){const n=t.EpF();t._uU(0,"\n    "),t.TgZ(1,"app-ct-flex",35),t._uU(2,"\n        "),t.TgZ(3,"app-ct-flex-item"),t._uU(4,"\n            "),t.TgZ(5,"div",36),t._uU(6),t.qZA(),t._uU(7,"\n        "),t.qZA(),t._uU(8,"\n        "),t.TgZ(9,"app-ct-flex-item"),t._uU(10,"\n            "),t.TgZ(11,"button",37),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.downloadResults())}),t._uU(12,"\n                Download\n            "),t.qZA(),t._uU(13,"\n        "),t.qZA(),t._uU(14,"\n        "),t.TgZ(15,"app-ct-flex-item"),t._uU(16,"\n            "),t.TgZ(17,"button",37),t.NdJ("click",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.downloadSelector.clear())}),t._uU(18,"\n                Discard\n            "),t.qZA(),t._uU(19,"\n        "),t.qZA(),t._uU(20,"\n    "),t.qZA(),t._uU(21,"\n")}if(2&e){const n=t.oxw();t.xp6(6),t.hij("\n                Selected \xd7 ",n.downloadSelector.size,"\n            "),t.xp6(5),t.Q6J("disabled",n.isLoading),t.xp6(6),t.Q6J("disabled",n.isLoading)}}const Ae=function(){return["upload"]};function ye(e,o){1&e&&(t.ynx(0),t._uU(1,"\n        "),t.TgZ(2,"button",38),t._uU(3,"Upload files and start\n            processing"),t.qZA(),t._uU(4,"\n    "),t.BQk()),2&e&&(t.xp6(2),t.Q6J("routerLink",t.DdM(1,Ae)))}function be(e,o){if(1&e&&(t._uU(0,"\n    "),t.YNc(1,ye,5,2,"ng-container",0),t._uU(2,"\n")),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isRole.MainOperator)}}class L extends F.S{constructor(o,n,a,i,p){super(o),(0,c.Z)(this,"authenticationService",void 0),(0,c.Z)(this,"companyService",void 0),(0,c.Z)(this,"activatedRoute",void 0),(0,c.Z)(this,"dialog",void 0),(0,c.Z)(this,"translate",void 0),(0,c.Z)(this,"companyUniqueId",void 0),(0,c.Z)(this,"batchesResult",void 0),(0,c.Z)(this,"batches",void 0),(0,c.Z)(this,"dataSource",new _.by([])),(0,c.Z)(this,"selection",new Qn.Ov(!0,[])),(0,c.Z)(this,"downloadSelector",new Yn.Z),this.authenticationService=o,this.companyService=n,this.activatedRoute=a,this.dialog=i,this.translate=p}checkAndToggleRowSeletion(o){this.isFinished(o)&&!this.isExecContextDeleted(o)&&this.downloadSelector.toggle(o)}ngOnInit(){this.companyUniqueId=this.activatedRoute.snapshot.paramMap.get("companyUniqueId"),this.updateTable("0")}isAllSelected(){return this.selection.selected.length===this.dataSource.data.filter(o=>o.batch.deleted).length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.filter(o=>o.batch.deleted).forEach(o=>this.selection.select(o))}get columnsToDisplay(){return this.isRole.MainOperator?["check","id","createdOn","isBatchConsistent","isDeleted","sourceCode","execState","bts"]:["id","createdOn","isBatchConsistent","isDeleted","sourceCode","execState","bts"]}updateTable(o){this.isLoading=!0,this.companyService.batches(o,this.companyUniqueId).subscribe({next:n=>{this.batchesResult=n,this.batches=this.batchesResult.batches.content,this.dataSource=new _.by(this.batches),this.selection.clear()},complete:()=>this.isLoading=!1})}isFinished(o){return o.batch.execState===K.h.Finished||o.batch.execState===K.h.Error||o.batch.execState===K.h.Archived}isExecContextDeleted(o){return o.execContextDeleted}prevPage(){this.updateTable((this.batchesResult.batches.number-1).toString())}nextPage(){this.updateTable((this.batchesResult.batches.number+1).toString())}deleteOne(o){this.isLoading=!0,this.companyService.processBatchDeleteCommit(this.companyUniqueId,o.batch.id.toString()).subscribe({complete:()=>{this.updateTable(this.batchesResult.batches.number.toString())}})}deleteMany(){this.isLoading=!0,this.companyService.processBatchesBulkDeleteCommit(this.companyUniqueId,this.selection.selected.map(o=>o.batch.id).toString()).subscribe({next:()=>{this.updateTable(this.batchesResult.batches.number.toString())}})}downloadResult(o){this.companyService.downloadProcessingResult(this.companyUniqueId,o.batch.id.toString()).subscribe(n=>{const a=n.headers.get("Content-Disposition").replace("filename*=UTF-8''","")||"result.zip";$.saveAs(n.body,a)})}downloadOriginFile(o){this.companyService.downloadOriginFile(this.companyUniqueId,o.batch.id.toString(),o.uploadedFileName).subscribe(n=>{const a=n.headers.get("Content-Disposition").replace("filename*=UTF-8''","")||"result.zip";$.saveAs(n.body,a)})}downloadResults(){this.isLoading=!0,this.companyService.downloadProcessingResults(this.downloadSelector.getList(),this.companyUniqueId).subscribe(()=>{this.isLoading=!1,this.downloadSelector.clear()})}}(0,c.Z)(L,"\u0275fac",function(o){return new(o||L)(t.Y36(Z.$h),t.Y36(g),t.Y36(r.gz),t.Y36(Dn.uw),t.Y36(R.sK))}),(0,c.Z)(L,"\u0275cmp",t.Xpm({type:L,selectors:[["app-company-batch-list"]],features:[t.qOj],decls:7,vars:1,consts:[[4,"ngIf"],["downloadButtonsTemplate",""],["uploadButtonTemplate",""],["justify-content","space-between"],[4,"ngTemplateOutlet"],[3,"isWaiting"],["mat-table","",1,"mat-table",3,"dataSource"],["matColumnDef","check"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","createdOn"],["matColumnDef","isBatchConsistent"],["matColumnDef","isDeleted"],["matColumnDef","sourceCode"],["matColumnDef","execState"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"selected-color","click",4,"matRowDef","matRowDefColumns"],[3,"pageableDefault","prev","next"],["mat-header-cell",""],["color","warn",3,"checked","indeterminate","change"],[1,"check-area"],["mat-cell",""],["color","warn",3,"checked","click","change"],["disabled",""],[1,"no-wrap"],["justify-content","flex-end","gap","9px"],["mat-flat-button","","size","forTableRow","color","primary",3,"routerLink","disabled"],["mat-flat-button","","size","forTableRow","color","primary",3,"disabled","click"],["mat-flat-button","","size","forTableRow","color","primary",3,"click"],["mat-flat-button","","color","warn","size","forTableRow","title","Delete",3,"disabled","click"],["mat-header-row",""],["mat-row","",3,"click"],["mat-flat-button","","color","warn","title","Delete Checked",3,"disabled","click"],["justify-content","center","gap","unit(1)","align-items","center"],[1,"selected-count"],["mat-flat-button","","color","primary",3,"disabled","click"],["mat-flat-button","","color","primary",3,"routerLink"]],template:function(o,n){1&o&&(t.YNc(0,xe,117,9,"app-ct-section",0),t._uU(1,"\n\n\n\n"),t.YNc(2,Te,22,3,"ng-template",null,1,t.W1O),t._uU(4,"\n\n\n\n"),t.YNc(5,be,3,1,"ng-template",null,2,t.W1O)),2&o&&t.Q6J("ngIf",n.batchesResult)},dependencies:[d.O5,d.tP,r.rH,f.U,C.n,S.V,N.R,j.a,x.i,T.Z,A.t,v.B,q.i,y._,P.C,U.lW,G.oG,On.Hw,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,d.uU,R.X$],styles:["mat-checkbox[_ngcontent-%COMP%]{position:relative}.check-area[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;top:50%;left:50%;margin-top:-20px;margin-left:-20px;background-color:#0000}.selected-color[_ngcontent-%COMP%]{background-color:#ffc1072e}.selected-count[_ngcontent-%COMP%]{background:rgba(255,193,7,.18);border-radius:4px;padding:10px 20px 8px}"]})),tt([(0,V.K)({question:e=>({text:(0,B.J)("batch-company.delete-dialog.Do you want to delete Batch _batchId_"),params:{batchId:e.batch.id}}),rejectTitle:`${(0,B.J)("batch-company.delete-dialog.Cancel")}`,resolveTitle:`${(0,B.J)("batch-company.delete-dialog.Delete")}`}),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",void 0)],L.prototype,"deleteOne",null),tt([(0,V.K)({question:()=>({text:(0,B.J)("batch-company.delete-dialog.Do you want to delete Batches"),params:{}}),rejectTitle:`${(0,B.J)("batch-company.delete-dialog.Cancel")}`,resolveTitle:`${(0,B.J)("batch-company.delete-dialog.Delete")}`}),Q("design:type",Function),Q("design:paramtypes",[]),Q("design:returntype",void 0)],L.prototype,"deleteMany",null);var D=s(5126);const nt=[{path:"",component:ct},{path:"companies",component:Bt},{path:":companyUniqueId/edit",canActivate:[D.k],component:Dt,data:{backConfig:["../","../","companies"],requiredRoles:[Z.uU.MainAdmin]}},{path:"add",component:gn,data:{backConfig:["../","companies"]}},{path:":companyUniqueId/accounts",component:Un,canActivate:[D.k],data:{backConfig:["../","../","companies"],requiredRoles:[Z.uU.MainAdmin]}},{path:":companyUniqueId/account/add",component:fn,data:{backConfig:["../","../","accounts"]}},{path:":companyUniqueId/account/:accountId/edit",component:xn,data:{backConfig:["../","../","../","accounts"]}},{path:":companyUniqueId/account/:accountId/edit-roles",component:vn,data:{backConfig:["../","../","../","accounts"]}},{path:":companyUniqueId/account/:accountId/edit-password",component:An,data:{backConfig:["../","../","../","accounts"]}},{path:"1/batches",redirectTo:"companies"},{path:":companyUniqueId/batches",component:L,canActivate:[D.k],data:{backConfig:["../","../","companies"],requiredRoles:[Z.uU.MainSupport,Z.uU.MainOperator]}},{path:":companyUniqueId/batches/upload",component:Bn,canActivate:[D.k],data:{backConfig:["../"],requiredRoles:[Z.uU.MainSupport,Z.uU.MainOperator]}},{path:":companyUniqueId/batch/:batchId",component:In,canActivate:[D.k],data:{backConfig:["../","../","batches"],requiredRoles:[Z.uU.MainSupport,Z.uU.MainOperator]}}];let et=(()=>{class e{}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,c.Z)(e,"\u0275mod",t.oAB({type:e})),(0,c.Z)(e,"\u0275inj",t.cJS({imports:[r.Bz.forChild(nt),r.Bz]})),e})(),ve=(()=>{class e{}return(0,c.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,c.Z)(e,"\u0275mod",t.oAB({type:e})),(0,c.Z)(e,"\u0275inj",t.cJS({imports:[d.ez,et,ot.E,at.$,u.u5,u.UX,R.aw.forChild({})]})),e})()}}]);