"use strict";(self.webpackChunkmhbp_angular=self.webpackChunkmhbp_angular||[]).push([[250],{3250:(se,y,c)=>{c.r(y),c.d(y,{BatchModule:()=>ae,BatchRoutes:()=>N,BatchRoutingModule:()=>M});var _=c(6895),U=c(4006),r=c(9299),d=c(3081),Q=c(1060),L=c(535),v=c(8889),t=c(4650),D=c(4853),Z=c(1439),x=c(9185),b=c(6264),T=c(305),C=c(5014),A=c(9863);function j(e,o){if(1&e&&(t.TgZ(0,"app-ct-section-body-row"),t._uU(1,"\n      "),t.TgZ(2,"app-ct-pre"),t._uU(3),t.qZA(),t._uU(4,"\n    "),t.qZA()),2&e){const n=t.oxw();t.xp6(3),t.Oqu(n.response.console)}}const k=function(e){return{batchId:e}},P=function(e,o){return[e,o]};let $=(()=>{class e{constructor(n,a,s){this.route=n,this.batchService=a,this.router=s,this.states=L.C,this.currentState=L.C.firstLoading}ngOnInit(){this.batchId=this.route.snapshot.paramMap.get("batchId"),this.updateResponse()}updateResponse(){this.batchService.getProcessingResourceStatus(this.batchId).subscribe(n=>{this.response=n,this.currentState=this.states.show})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.gz),t.Y36(v.$),t.Y36(r.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-batch-status"]],decls:21,vars:10,consts:[[4,"ngIf"]],template:function(n,a){1&n&&(t._uU(0,"\n"),t.TgZ(1,"app-ct-section"),t._uU(2,"\n  "),t.TgZ(3,"app-ct-section-header"),t._uU(4,"\n    "),t.TgZ(5,"app-ct-section-header-row"),t._uU(6,"\n      "),t.TgZ(7,"app-ct-heading"),t._uU(8,"\n        "),t.TgZ(9,"div"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t._uU(12,"\n      "),t.qZA(),t._uU(13,"\n    "),t.qZA(),t._uU(14,"\n  "),t.qZA(),t._uU(15,"\n  "),t.TgZ(16,"app-ct-section-body"),t._uU(17,"\n    "),t.YNc(18,j,5,1,"app-ct-section-body-row",0),t._uU(19,"\n  "),t.qZA(),t._uU(20,"\n"),t.qZA()),2&n&&(t.xp6(10),t.hij("",t.xi3(11,2,"batch-status.Status of execution of batch _batchId_",t.VKq(5,k,a.batchId))," "),t.xp6(8),t.Q6J("ngIf",t.WLB(7,P,a.states.wait,a.states.show).includes(a.currentState)))},dependencies:[_.O5,D.Q,Z.U,x.n,b.i,T.Z,C.t,A._,d.X$],styles:["pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word}"]}),e})();var E=c(2199),w=c(8318),h=c(3788),q=c(1145),R=c(6890),I=c(2555),H=c(2379),K=c(5510),G=c(1099),Y=c(8868),J=c(3370),z=c(2587),X=c(1023),W=c(3238),F=c(4859),S=c(9549),V=c(4385);const tt=["fileUpload"];function et(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1,"\n                                "),t.TgZ(2,"mat-option",11),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("value",n),t.xp6(1),t.Oqu(n.uid)}}function nt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",1),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\n                "),t.qZA(),t._uU(14,"\n            "),t.qZA(),t._uU(15,"\n            "),t.TgZ(16,"app-ct-section-body"),t._uU(17,"\n                "),t.TgZ(18,"app-ct-section-body-row"),t._uU(19,"\n                    "),t.TgZ(20,"mat-form-field",2),t._uU(21,"\n                        "),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._uU(25,"\n                        "),t.TgZ(26,"mat-select",3),t.NdJ("ngModelChange",function(s){t.CHM(n);const i=t.oxw();return t.KtG(i.sourceCode=s)}),t._uU(27,"\n                            "),t.YNc(28,et,5,2,"div",4),t._uU(29,"\n                        "),t.qZA(),t._uU(30,"\n                        "),t.TgZ(31,"mat-hint"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._uU(34,"\n                    "),t.qZA(),t._uU(35,"\n\n                    "),t._UZ(36,"br"),t._uU(37,"\n                    "),t._UZ(38,"br"),t._uU(39,"\n\n                    "),t.TgZ(40,"div"),t._uU(41,"\n                        "),t.TgZ(42,"app-ct-file-upload",5,6),t.NdJ("changed",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.fileUploadChanged())}),t.ALo(44,"translate"),t._uU(45,"\n                        "),t.qZA(),t._uU(46,"\n                        "),t.TgZ(47,"app-ct-hint"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._uU(50,"\n                        "),t.TgZ(51,"app-ct-hint"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t._uU(54,"\n                    "),t.qZA(),t._uU(55,"\n                "),t.qZA(),t._uU(56,"\n            "),t.qZA(),t._uU(57,"\n            "),t.TgZ(58,"app-ct-section-footer"),t._uU(59,"\n                "),t.TgZ(60,"app-ct-section-footer-row"),t._uU(61,"\n                    "),t.TgZ(62,"app-ct-flex",7),t._uU(63,"\n                        "),t.TgZ(64,"app-ct-flex-item"),t._uU(65,"\n                            "),t.TgZ(66,"button",8),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.back())}),t._uU(67),t.ALo(68,"translate"),t.qZA(),t._uU(69,"\n                        "),t.qZA(),t._uU(70,"\n                        "),t.TgZ(71,"app-ct-flex-item"),t._uU(72,"\n                            "),t.TgZ(73,"button",9),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.upload())}),t._uU(74),t.ALo(75,"translate"),t.qZA(),t._uU(76,"\n                        "),t.qZA(),t._uU(77,"\n                    "),t.qZA(),t._uU(78,"\n                "),t.qZA(),t._uU(79,"\n            "),t.qZA(),t._uU(80,"\n        "),t.qZA(),t._uU(81,"\n    "),t.qZA(),t._uU(82,"\n    "),t.TgZ(83,"app-ct-col",1),t._uU(84,"\n        "),t._UZ(85,"app-ct-rest-status",10),t._uU(86,"\n    "),t.qZA(),t._uU(87,"\n"),t.qZA()}if(2&e){const n=t.oxw();t.xp6(11),t.Oqu(t.lcZ(12,12,"batch-add.Upload file for processing")),t.xp6(12),t.hij(" ",t.lcZ(24,14,"batch-add.List of Source Codes"),""),t.xp6(3),t.Q6J("ngModel",n.sourceCode),t.xp6(2),t.Q6J("ngForOf",n.listOfSourceCodes),t.xp6(4),t.Oqu(t.lcZ(33,16,"batch-add.This is a required field.")),t.xp6(10),t.s9C("buttonTitle",t.lcZ(44,18,"batch-add.Select File")),t.xp6(6),t.Oqu(t.lcZ(49,20,"batch-add.This is a required field.")),t.xp6(4),t.Oqu(t.lcZ(53,22,"batch-add.Only .xml and .zip files are supported")),t.xp6(15),t.hij("\n                                ",t.lcZ(68,24,"batch-add.Cancel"),""),t.xp6(6),t.Q6J("disabled",!n.sourceCode||!n.file),t.xp6(1),t.hij(" ",t.lcZ(75,26,"batch-add.Upload-File-button"),""),t.xp6(11),t.Q6J("content",n.uploadResponse)}}let ot=(()=>{class e extends w.S{constructor(n,a,s,i,p,u){super(u),this.batchService=n,this.router=a,this.route=s,this.translate=i,this.settingsService=p,this.authenticationService=u,this.currentStates=new Set,this.listOfSourceCodes=[]}ngOnInit(){this.subscribeSubscription(this.settingsService.events.subscribe(n=>{n instanceof q.U&&this.translate.use(n.settings.language)})),this.updateResponse()}ngOnDestroy(){this.unsubscribeSubscriptions()}updateResponse(){this.batchService.batchAdd().subscribe(n=>{this.response=n,this.listOfSourceCodes=this.response.items})}back(){this.router.navigate(["../"],{relativeTo:this.route})}upload(){this.batchService.uploadFile(this.sourceCode.id.toString(),this.fileUpload.fileInput.nativeElement.files[0]).subscribe(n=>{n.status===E.o.OK&&this.back(),this.uploadResponse=n})}fileUploadChanged(){this.file=this.fileUpload.fileInput.nativeElement.files[0]||!1}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.$),t.Y36(r.F0),t.Y36(r.gz),t.Y36(d.sK),t.Y36(q.g),t.Y36(h.$h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-batch-add"]],viewQuery:function(n,a){if(1&n&&t.Gf(tt,5),2&n){let s;t.iGM(s=t.CRH())&&(a.fileUpload=s.first)}},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["size","6"],["appearance","outline"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["acceptTypes",".zip, .xml",3,"buttonTitle","changed"],["fileUpload",""],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],[3,"content"],[3,"value"]],template:function(n,a){1&n&&t.YNc(0,nt,88,28,"app-ct-cols",0),2&n&&t.Q6J("ngIf",a.response)},dependencies:[_.sg,_.O5,Z.U,x.n,R.V,I.R,H.t,K.W,G.E,b.i,T.Z,C.t,Y.B,J.i,A._,z.C,X.R,W.ey,F.lW,S.KE,S.hX,S.bx,V.gD,U.JJ,U.On,d.X$],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();var ct=c(1623),at=c(4186),st=c(197),it=c(5155);let pt=(()=>{class e{constructor(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-batch-root"]],decls:8,vars:0,template:function(n,a){1&n&&(t.TgZ(0,"app-ct-content"),t._uU(1,"\n    "),t._UZ(2,"router-outlet"),t._uU(3,"\n    "),t._UZ(4,"app-ct-back-button"),t._uU(5,"\n    "),t._UZ(6,"app-copy-right"),t._uU(7,"\n"),t.qZA())},dependencies:[r.lC,at.O,st.N,it.N]}),e})();var ut=c(456),lt=c(2231);function _t(e,o){if(1&e&&(t.TgZ(0,"td"),t._uU(1,"\n                    "),t.TgZ(2,"div"),t._uU(3),t.qZA(),t._uU(4,"\n                    "),t.TgZ(5,"div"),t._uU(6),t.qZA(),t._uU(7,"\n                "),t.qZA()),2&e){const n=o.$implicit;t.xp6(3),t.Oqu(n.process),t.xp6(3),t.Oqu(n.functionCode)}}function rt(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1,"\n                        "),t.TgZ(2,"div"),t._uU(3),t.qZA(),t._uU(4,"\n                        "),t.TgZ(5,"div"),t._uU(6),t.qZA(),t._uU(7,"\n                    "),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(3),t.Oqu(n.taskId),t.xp6(3),t.Oqu(n.state)}}function dt(e,o){if(1&e&&(t.TgZ(0,"td"),t._uU(1,"\n                    "),t.YNc(2,rt,8,2,"div",0),t._uU(3,"\n                "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",!n.empty)}}function ht(e,o){if(1&e&&(t.TgZ(0,"tr"),t._uU(1,"\n                "),t.TgZ(2,"td"),t._uU(3),t.qZA(),t._uU(4,"\n                "),t.YNc(5,dt,4,1,"td",3),t._uU(6,"\n            "),t.qZA()),2&e){const n=o.$implicit;t.xp6(3),t.Oqu(n.context),t.xp6(2),t.Q6J("ngForOf",n.cells)}}function mt(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1,"\n    "),t.TgZ(2,"table",1),t._uU(3,"\n        "),t.TgZ(4,"tr"),t._uU(5,"\n            "),t.TgZ(6,"td"),t._uU(7,"UID: "),t.qZA(),t._uU(8,"\n            "),t.TgZ(9,"td"),t._uU(10),t.qZA(),t._uU(11,"\n        "),t.qZA(),t._uU(12,"\n        "),t.TgZ(13,"tr"),t._uU(14,"\n            "),t.TgZ(15,"td"),t._uU(16,"Is valid:"),t.qZA(),t._uU(17,"\n            "),t.TgZ(18,"td"),t._uU(19),t.qZA(),t._uU(20,"\n        "),t.qZA(),t._uU(21,"\n        "),t.TgZ(22,"tr"),t._uU(23,"\n            "),t.TgZ(24,"td"),t._uU(25,"Type: "),t.qZA(),t._uU(26,"\n            "),t.TgZ(27,"td"),t._uU(28),t.qZA(),t._uU(29,"\n        "),t.qZA(),t._uU(30,"\n    "),t.qZA(),t._uU(31,"\n    "),t._UZ(32,"br"),t._uU(33,"\n    "),t.TgZ(34,"table",2),t._uU(35,"\n        "),t.TgZ(36,"thead"),t._uU(37,"\n            "),t.TgZ(38,"tr"),t._uU(39,"\n                "),t._UZ(40,"td"),t._uU(41,"\n                "),t.YNc(42,_t,8,2,"td",3),t._uU(43,"\n            "),t.qZA(),t._uU(44,"\n        "),t.qZA(),t._uU(45,"\n        "),t.TgZ(46,"tbody"),t._uU(47,"\n            "),t.YNc(48,ht,7,2,"tr",3),t._uU(49,"\n        "),t.qZA(),t._uU(50,"\n    "),t.qZA(),t._uU(51,"\n"),t.qZA()),2&e){const n=t.oxw();t.xp6(10),t.Oqu(n.response.sourceCodeUid),t.xp6(9),t.Oqu(n.response.sourceCodeValid),t.xp6(9),t.Oqu(n.response.sourceCodeType),t.xp6(14),t.Q6J("ngForOf",n.response.header),t.xp6(6),t.Q6J("ngForOf",n.response.lines)}}let gt=(()=>{class e{constructor(n){this.execContextService=n}ngOnInit(){this.sourceCodeId&&this.execContextId&&this.execContextService.execContextsState(this.sourceCodeId,this.execContextId).subscribe(n=>{this.response=n})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(lt.w))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-ct-state-of-tasks"]],inputs:{sourceCodeId:"sourceCodeId",execContextId:"execContextId"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"info-table"],[1,"state-table"],[4,"ngFor","ngForOf"]],template:function(n,a){1&n&&t.YNc(0,mt,52,5,"div",0),2&n&&t.Q6J("ngIf",a.response)},dependencies:[_.sg,_.O5],styles:["[_nghost-%COMP%]{font-family:Roboto Mono,Courier New,Courier,monospace}.info-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-right:18px;line-height:1.2;vertical-align:baseline}.state-table[_ngcontent-%COMP%]{border-collapse:collapse}.state-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#8080800d;vertical-align:baseline;white-space:nowrap;padding:6.75px 9px;font-size:80%;line-height:1.2}.state-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid rgba(128,128,128,.66)}.state-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid rgba(128,128,128,.33)}"]}),e})(),ft=(()=>{class e{constructor(n){this.route=n,this.sourceCodeId=this.route.snapshot.paramMap.get("sourceCodeId"),this.execContextId=this.route.snapshot.paramMap.get("execContextId")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(r.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-batch-state"]],decls:19,vars:2,consts:[[3,"sourceCodeId","execContextId"]],template:function(n,a){1&n&&(t.TgZ(0,"app-ct-section"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-heading"),t._uU(7,"State of Tasks"),t.qZA(),t._uU(8,"\n        "),t.qZA(),t._uU(9,"\n    "),t.qZA(),t._uU(10,"\n    "),t.TgZ(11,"app-ct-section-body"),t._uU(12,"\n        "),t.TgZ(13,"app-ct-section-body-row"),t._uU(14,"\n            "),t._UZ(15,"app-ct-state-of-tasks",0),t._uU(16,"\n        "),t.qZA(),t._uU(17,"\n    "),t.qZA(),t._uU(18,"\n"),t.qZA()),2&n&&(t.xp6(15),t.Q6J("sourceCodeId",a.sourceCodeId)("execContextId",a.execContextId))},dependencies:[Z.U,x.n,b.i,T.Z,C.t,A._,gt]}),e})();var l=c(3626),B=c(7520),Ut=c(9272),Zt=c(5986),xt=c(6707),bt=c(4327),Tt=c(5938),Ct=c(7530),At=c(7824),vt=c(7392),O=function(e,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,o)};function St(e,o){1&e&&t.GkF(0)}function Bt(e,o){1&e&&(t.TgZ(0,"span",22),t._uU(1,"\u2713\xa0\xa0"),t.qZA())}function Ot(e,o){1&e&&(t.TgZ(0,"span",22),t._uU(1,"\u2717\xa0\xa0"),t.qZA())}function yt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.Id")))}function Lt(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("",n.batch.id," ")}}function wt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"batch.Created On"),"\n                        "))}function Rt(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij("\n                            ",t.xi3(2,1,n.batch.createdOn,"MMM d, yyyy, HH:mm:ss")," ")}}function It(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"batch.Owner's username"),"\n                        "))}function Yt(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Oqu(n.username)}}function Jt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                            ",t.lcZ(2,1,"batch.Is Batch Consistent?")," "))}function Ft(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.isBatchConsistent.true")))}function Nt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"batch.isBatchConsistent.false")))}function Mt(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1," "),t.YNc(2,Ft,3,3,"span",0),t.YNc(3,Nt,3,3,"span",0),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",n.ok),t.xp6(1),t.Q6J("ngIf",!n.ok)}}function Qt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1,"\n                            "),t.TgZ(2,"div",25),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5,"\n                            "),t.TgZ(6,"div",25),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,"\n                        "),t.qZA()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"batch.Source Code")),t.xp6(4),t.Oqu(t.lcZ(8,4,"batch.File name")))}function Dt(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1,"\n                            "),t.TgZ(2,"div",25),t._uU(3),t.qZA(),t._uU(4,"\n                            "),t.TgZ(5,"div",25),t._uU(6),t.qZA(),t._uU(7,"\n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(3),t.Oqu(n.sourceCodeUid),t.xp6(3),t.Oqu(n.uploadedFileName)}}function jt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"batch.Exec State"),"\n                        "))}function kt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                                ",t.lcZ(2,1,"batch.isBatchConsistent.Error"),"\n                            "))}function Pt(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                                ",t.lcZ(2,1,"batch.isBatchConsistent.Preparing"),"\n                            "))}function $t(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                                ",t.lcZ(2,1,"batch.isBatchConsistent.Processing"),"\n                            "))}function Et(e,o){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij("\n                                ",t.lcZ(2,1,"batch.isBatchConsistent.Finished"),"\n                            "))}function Ht(e,o){if(1&e&&(t.TgZ(0,"td",24),t._uU(1,"\n                            "),t.YNc(2,kt,3,3,"span",0),t._uU(3,"\n                            "),t.YNc(4,Pt,3,3,"span",0),t._uU(5,"\n                            "),t.YNc(6,$t,3,3,"span",0),t._uU(7,"\n                            "),t.YNc(8,Et,3,3,"span",0),t._uU(9,"\n                        "),t.qZA()),2&e){const n=o.$implicit;t.xp6(2),t.Q6J("ngIf",-1===n.execState),t.xp6(2),t.Q6J("ngIf",2===n.execState),t.xp6(2),t.Q6J("ngIf",3===n.execState),t.xp6(2),t.Q6J("ngIf",4===n.execState)}}function Kt(e,o){1&e&&(t.TgZ(0,"th",23),t._uU(1," "),t.qZA())}const Gt=function(e,o,n){return["/batch",e,"source-code",o,"exec-context",n,"state"]},zt=function(e){return["/batch",e,"status"]};function Xt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",24),t._uU(1,"\n                            "),t.TgZ(2,"app-ct-flex",26),t._uU(3,"\n                                "),t.TgZ(4,"app-ct-flex-item"),t._uU(5,"\n                                    "),t.TgZ(6,"button",27),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,"\n                                "),t.qZA(),t._uU(10,"\n\n                                "),t.TgZ(11,"app-ct-flex-item"),t._uU(12,"\n                                    "),t.TgZ(13,"button",27),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16,"\n                                "),t.qZA(),t._uU(17,"\n\n                                "),t.TgZ(18,"app-ct-flex-item"),t._uU(19,"\n                                    "),t.TgZ(20,"button",28),t.NdJ("click",function(s){const p=t.CHM(n).$implicit,u=t.oxw(2);return t.KtG(u.downloadFile(s,p.batch.id))}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._uU(23,"\n                                "),t.qZA(),t._uU(24,"\n\n                                "),t.TgZ(25,"app-ct-flex-item"),t._uU(26,"\n                                    "),t.TgZ(27,"button",29),t.NdJ("click",function(s){const p=t.CHM(n).$implicit,u=t.oxw(2);return t.KtG(u.delete(s,p))}),t._uU(28,"\n                                        "),t.TgZ(29,"mat-icon"),t._uU(30,"delete"),t.qZA(),t._uU(31,"\n                                    "),t.qZA(),t._uU(32,"\n                                "),t.qZA(),t._uU(33,"\n                            "),t.qZA(),t._uU(34,"\n                        "),t.qZA()}if(2&e){const n=o.$implicit;t.xp6(6),t.Q6J("disabled",n.execContextDeleted)("routerLink",t.kEZ(14,Gt,n.batch.id,n.batch.sourceCodeId,n.batch.execContextId)),t.xp6(1),t.hij("\n                                        ",t.lcZ(8,8,"batch.Task states"),""),t.xp6(6),t.Q6J("disabled",4!==n.execState||n.execContextDeleted)("routerLink",t.VKq(18,zt,n.batch.id)),t.xp6(1),t.hij("\n                                        ",t.lcZ(15,10,"batch.Status"),""),t.xp6(6),t.Q6J("disabled",4!==n.execState||n.execContextDeleted),t.xp6(1),t.hij("\n                                        ",t.lcZ(22,12,"batch.Download Result"),"")}}function Wt(e,o){1&e&&(t.TgZ(0,"tr",30),t._uU(1," "),t.qZA())}function Vt(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"tr",31),t.NdJ("click",function(s){const p=t.CHM(n).$implicit,u=t.oxw(2);return t.KtG(u.selectRow(s,p))}),t.qZA()}if(2&e){const n=o.$implicit,a=t.oxw(2);t.ekj("deleted-table-row",a.isDeletedRow(n))("selected-color",a.isSelectedRow(n))}}function te(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-flex-item"),t._uU(1,"\n                    "),t.TgZ(2,"app-ct-flex",32),t._uU(3,"\n                        "),t.TgZ(4,"app-ct-flex-item"),t._uU(5,"\n                            "),t.TgZ(6,"div",33),t._uU(7),t.ALo(8,"translate"),t.qZA(),t._uU(9,"\n                        "),t.qZA(),t._uU(10,"\n                        "),t.TgZ(11,"app-ct-flex-item"),t._uU(12,"\n                            "),t.TgZ(13,"button",34),t.NdJ("click",function(){t.CHM(n);const s=t.oxw(2);return t.KtG(s.downloadSelectedRows())}),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._uU(16,"\n                        "),t.qZA(),t._uU(17,"\n                        "),t.TgZ(18,"app-ct-flex-item"),t._uU(19,"\n                            "),t.TgZ(20,"button",34),t.NdJ("click",function(){t.CHM(n);const s=t.oxw(2);return t.KtG(s.discardSelectedRows())}),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._uU(23,"\n                        "),t.qZA(),t._uU(24,"\n                    "),t.qZA(),t._uU(25,"\n                "),t.qZA()}if(2&e){const n=t.oxw(2);t.xp6(7),t.AsE("\n                                ",t.lcZ(8,4,"batch.Batch")," \xd7 ",n.countOfSelectedRows(),"\n                            "),t.xp6(7),t.Oqu(t.lcZ(15,6,"batch.Download")),t.xp6(7),t.Oqu(t.lcZ(22,8,"batch.Discard"))}}function ee(e,o){1&e&&t.GkF(0)}function ne(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"app-ct-section"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-flex",2),t._uU(7,"\n                "),t.TgZ(8,"app-ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t._uU(13,"\n                "),t.qZA(),t._uU(14,"\n                "),t.TgZ(15,"app-ct-flex-item"),t._uU(16,"\n                    "),t.TgZ(17,"app-ct-flex",3),t._uU(18,"\n                        "),t.TgZ(19,"app-ct-flex-item"),t._uU(20,"\n                            "),t.YNc(21,St,1,0,"ng-container",4),t._uU(22,"\n                        "),t.qZA(),t._uU(23,"\n                        "),t.TgZ(24,"app-ct-flex-item"),t._uU(25,"\n                            "),t.TgZ(26,"button",5),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.toggleFilter())}),t._uU(27,"\n                                "),t.YNc(28,Bt,2,0,"span",6),t._uU(29,"\n                                "),t.YNc(30,Ot,2,0,"span",6),t._uU(31,"\n                                "),t.TgZ(32,"span"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._uU(35,"\n                            "),t.qZA(),t._uU(36,"\n                        "),t.qZA(),t._uU(37,"\n                    "),t.qZA(),t._uU(38,"\n                "),t.qZA(),t._uU(39,"\n            "),t.qZA(),t._uU(40,"\n        "),t.qZA(),t._uU(41,"\n    "),t.qZA(),t._uU(42,"\n    "),t.TgZ(43,"app-ct-section-body"),t._uU(44,"\n        "),t.TgZ(45,"app-ct-section-body-row"),t._uU(46,"\n            "),t.TgZ(47,"ct-table",7),t._uU(48,"\n                "),t.TgZ(49,"table",8),t._uU(50,"\n                    "),t.ynx(51,9),t._uU(52,"\n                        "),t.YNc(53,yt,3,3,"th",10),t._uU(54,"\n                        "),t.YNc(55,Lt,2,1,"td",11),t._uU(56,"\n                    "),t.BQk(),t._uU(57,"\n                    "),t.ynx(58,12),t._uU(59,"\n                        "),t.YNc(60,wt,3,3,"th",10),t._uU(61,"\n                        "),t.YNc(62,Rt,3,4,"td",11),t._uU(63,"\n                    "),t.BQk(),t._uU(64,"\n                    "),t.ynx(65,13),t._uU(66,"\n                        "),t.YNc(67,It,3,3,"th",10),t._uU(68,"\n                        "),t.YNc(69,Yt,2,1,"td",11),t._uU(70,"\n                    "),t.BQk(),t._uU(71,"\n                    "),t.ynx(72,14),t._uU(73,"\n                        "),t.YNc(74,Jt,3,3,"th",10),t._uU(75,"\n                        "),t.YNc(76,Mt,4,2,"td",11),t._uU(77,"\n                    "),t.BQk(),t._uU(78,"\n                    "),t.ynx(79,15),t._uU(80,"\n                        "),t.YNc(81,Qt,10,6,"th",10),t._uU(82,"\n                        "),t.YNc(83,Dt,8,2,"td",11),t._uU(84,"\n                    "),t.BQk(),t._uU(85,"\n                    "),t.ynx(86,16),t._uU(87,"\n                        "),t.YNc(88,jt,3,3,"th",10),t._uU(89,"\n                        "),t.YNc(90,Ht,10,4,"td",11),t._uU(91,"\n                    "),t.BQk(),t._uU(92,"\n                    "),t.ynx(93,17),t._uU(94,"\n                        "),t.YNc(95,Kt,2,0,"th",10),t._uU(96,"\n                        "),t.YNc(97,Xt,35,20,"td",11),t._uU(98,"\n                    "),t.BQk(),t._uU(99,"\n                    "),t.YNc(100,Wt,2,0,"tr",18),t._uU(101,"\n                    "),t.YNc(102,Vt,1,4,"tr",19),t._uU(103,"\n                "),t.qZA(),t._uU(104,"\n            "),t.qZA(),t._uU(105,"\n        "),t.qZA(),t._uU(106,"\n    "),t.qZA(),t._uU(107,"\n    "),t.TgZ(108,"app-ct-section-footer"),t._uU(109,"\n        "),t.TgZ(110,"app-ct-section-footer-row"),t._uU(111,"\n            "),t.TgZ(112,"app-ct-flex",20),t._uU(113,"\n                "),t.TgZ(114,"app-ct-flex-item"),t._uU(115,"\n                    "),t.TgZ(116,"app-ct-table-pagination",21),t.NdJ("prev",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.prevPage())})("next",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.nextPage())}),t.qZA(),t._uU(117,"\n                "),t.qZA(),t._uU(118,"\n\n                "),t.YNc(119,te,26,10,"app-ct-flex-item",0),t._uU(120,"\n\n                "),t.TgZ(121,"app-ct-flex-item"),t._uU(122,"\n                    "),t.YNc(123,ee,1,0,"ng-container",4),t._uU(124,"\n                "),t.qZA(),t._uU(125,"\n            "),t.qZA(),t._uU(126,"\n        "),t.qZA(),t._uU(127,"\n    "),t.qZA(),t._uU(128,"\n"),t.qZA()}if(2&e){const n=t.oxw(),a=t.MAs(3);t.xp6(11),t.hij("",t.lcZ(12,13,"batch.Batch")," "),t.xp6(10),t.Q6J("ngTemplateOutlet",a),t.xp6(5),t.Q6J("disabled",!1),t.xp6(2),t.Q6J("ngIf",n.isFiltered),t.xp6(2),t.Q6J("ngIf",!n.isFiltered),t.xp6(3),t.Oqu(t.lcZ(34,15,"batch.onlyMyBatches")),t.xp6(14),t.Q6J("isWaiting",n.isLoading),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(51),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",n.columnsToDisplay),t.xp6(14),t.Q6J("pageableDefault",n.batchesResult.batches),t.xp6(3),t.Q6J("ngIf",n.countOfSelectedRows()),t.xp6(4),t.Q6J("ngTemplateOutlet",a)}}function oe(e,o){1&e&&(t._uU(0,"\n    "),t.TgZ(1,"button",35),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,"\n")),2&e&&(t.xp6(1),t.Q6J("disabled",!1),t.xp6(1),t.hij("\n        ",t.lcZ(3,2,"batch.Upload files and start processing"),""))}function ce(e,o){1&e&&(t._uU(0,"\n    "),t.TgZ(1,"button",35),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4,"\n")),2&e&&(t.xp6(1),t.Q6J("disabled",!1),t.xp6(1),t.hij("\n        ",t.lcZ(3,2,"batch.Upload files and start processing"),""))}class m extends w.S{constructor(o,n,a,s,i,p){super(n),this.batchService=o,this.authenticationService=n,this.dialog=a,this.translate=s,this.batchExexStatusService=i,this.settingsService=p,this.dataSource=new l.by([]),this.columnsToDisplay=["id","createdOn","Owner","isBatchConsistent","sourceCode","execState","bts"]}ngOnInit(){this.isFiltered=this.settingsService.events.value.settings.batchFilter,this.updateTable("0",this.isFiltered),this.subscribeSubscription(this.batchExexStatusService.getStatuses.subscribe({next:o=>{this.batchExexStatusService.updateBatchesResultByStatuses(this.batchesResult,o)}}))}ngOnDestroy(){this.unsubscribeSubscriptions()}updateTable(o,n){this.isLoading=!0,this.batchService.batches(o,n).subscribe({next:a=>{this.batchesResult=a,this.columnsToDisplay=this.authenticationService.isRoleOperator()?["id","createdOn","Owner","sourceCode","execState","bts"]:["id","createdOn","Owner","isBatchConsistent","sourceCode","execState","bts"],this.dataSource=new l.by(a.batches.content||[]),this.isLoading=!1}})}toggleFilter(){this.isFiltered=!this.isFiltered,this.settingsService.toggleBatchFilter(this.isFiltered),this.updateTable("0",this.isFiltered)}isDeletedRow(o){return!1}delete(o,n){this.batchService.processResourceDeleteCommit(n.batch.id.toString()).subscribe({next:()=>{this.updateTable(this.batchesResult.batches.number.toString(),this.isFiltered)}})}downloadFile(o,n){o.stopPropagation(),this.batchService.downloadFile(n).subscribe(a=>{var s,i,p;const u=null===(p=null===(i=null===(s=a.headers.get("Content-Disposition"))||void 0===s?void 0:s.split)||void 0===i?void 0:i.call(s,"''"))||void 0===p?void 0:p[1];bt.saveAs(a.body,u||"result.zip")})}downloadSelectedRows(){this.batchService.batchDownloader.download()}discardSelectedRows(){this.batchService.batchDownloader.clear()}isSelectedRow(o){return this.batchService.batchDownloader.isSelected(o)}selectRow(o,n){o.stopPropagation(),n.ok&&n.execState===Zt.h.Finished&&this.batchService.batchDownloader.toggle(n)}countOfSelectedRows(){return this.batchService.batchDownloader.size}nextPage(){this.updateTable((this.batchesResult.batches.number+1).toString(),this.isFiltered)}prevPage(){this.updateTable((this.batchesResult.batches.number-1).toString(),this.isFiltered)}}m.\u0275fac=function(o){return new(o||m)(t.Y36(v.$),t.Y36(h.$h),t.Y36(Tt.uw),t.Y36(d.sK),t.Y36(xt.R),t.Y36(q.g))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-batch-list"]],features:[t.qOj],decls:7,vars:1,consts:[[4,"ngIf"],["uploadFilesButton",""],["justify-content","space-between","align-items","center","gap","unit(1)"],["justify-content","flex-end","align-items","center","gap","unit(1)"],[4,"ngTemplateOutlet"],["mat-stroked-button","",3,"disabled","click"],["style","vertical-align: baseline;",4,"ngIf"],[3,"isWaiting"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdOn"],["matColumnDef","Owner"],["matColumnDef","isBatchConsistent"],["matColumnDef","sourceCode"],["matColumnDef","execState"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"deleted-table-row","selected-color","click",4,"matRowDef","matRowDefColumns"],["justify-content","space-between","align-items","center"],[3,"pageableDefault","prev","next"],[2,"vertical-align","baseline"],["mat-header-cell",""],["mat-cell",""],[1,"no-wrap"],["justify-content","flex-end","gap","9px"],["mat-flat-button","","size","forTableRow","color","primary",3,"disabled","routerLink"],["mat-flat-button","","size","forTableRow","color","primary",3,"disabled","click"],["mat-flat-button","","color","warn","size","forTableRow","title","Delete",3,"click"],["mat-header-row",""],["mat-row","",3,"click"],["justify-content","center","align-items","center","gap","unit(1)"],[1,"selected-count"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","primary","routerLink","/batch/add",3,"disabled"]],template:function(o,n){1&o&&(t.YNc(0,ne,129,17,"app-ct-section",0),t._uU(1,"\n\n\n\n"),t.YNc(2,oe,5,4,"ng-template",null,1,t.W1O),t._uU(4,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"),t.YNc(5,ce,5,4,"ng-template",null,1,t.W1O)),2&o&&t.Q6J("ngIf",n.batchesResult)},dependencies:[_.O5,_.tP,r.rH,Z.U,x.n,R.V,I.R,Ct.a,b.i,T.Z,C.t,Y.B,J.i,A._,At.C,F.lW,vt.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,_.uU,d.X$],styles:[".selected-color[_ngcontent-%COMP%]{background:rgba(255,193,7,.18)}.selected-count[_ngcontent-%COMP%]{background:rgba(255,193,7,.18);border-radius:4px;padding:10px 20px 8px}"]}),function(e,o,n,a){var p,s=arguments.length,i=s<3?o:null===a?a=Object.getOwnPropertyDescriptor(o,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,o,n,a);else for(var u=e.length-1;u>=0;u--)(p=e[u])&&(i=(s<3?p(i):s>3?p(o,n,i):p(o,n))||i);s>3&&i&&Object.defineProperty(o,n,i)}([(0,Ut.K)({question:(e,o)=>(e.stopPropagation(),{text:(0,B.J)("batch.delete-dialog.Do you want to delete Batch _batchId_"),params:{batchId:o.batch.id}}),rejectTitle:`${(0,B.J)("batch.delete-dialog.Cancel")}`,resolveTitle:`${(0,B.J)("batch.delete-dialog.Delete")}`}),O("design:type",Function),O("design:paramtypes",[Event,Object]),O("design:returntype",void 0)],m.prototype,"delete",null);var g=c(5126);const f=[h.uU.Admin,h.uU.Data,h.uU.Manager,h.uU.Operator],N=[{path:"",component:pt,canActivate:[g.k],data:{requiredRoles:f},children:[{path:"",component:m,canActivate:[g.k],data:{requiredRoles:f}},{path:":batchId/status",component:$,canActivate:[g.k],data:{backConfig:["../","../"],requiredRoles:f}},{path:"add",component:ot,canActivate:[g.k],data:{backConfig:["../"],requiredRoles:f}},{path:":batchId/source-code/:sourceCodeId/exec-context/:execContextId/state",component:ft,canActivate:[g.k],data:{backConfig:["../","../","../","../","../","../"],requiredRoles:f}}]}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.Bz.forChild(N),r.Bz]}),e})(),ae=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.ez,M,ct.E,Q.$,U.u5,U.UX,ut.k,d.aw.forChild({})]}),e})()}}]);