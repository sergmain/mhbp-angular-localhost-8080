"use strict";(self.webpackChunkmhbp_angular=self.webpackChunkmhbp_angular||[]).push([[438],{1438:(Ft,U,c)=>{c.r(U),c.d(U,{FunctionsModule:()=>vt,FunctionsRoutes:()=>N,FunctionsRoutingModule:()=>S});var s=c(6895),_=c(4006),m=c(9299),w=c(3081),J=c(2199),Q=c(7528),O=c(2340),t=c(4650),q=c(529);const f=n=>`${O.N.baseUrl}dispatcher/function/${n}`;let Z=(()=>{class n{constructor(e){this.http=e}getFunctions(e){return this.http.get(f("functions"),{params:{page:e}})}deleteCommit(e){return this.http.get(f(`function-delete/${e}`))}uploadFunction(e){return this.http.post(f("function-upload-from-file"),(0,Q.P)({file:e}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(q.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T=c(1439),h=c(9185),x=c(6890),A=c(2555),D=c(2379),b=c(5510),I=c(1099),v=c(6264),F=c(305),C=c(5014),y=c(8868),R=c(3370),M=c(9863),j=c(1023),Y=c(4859);const P=["fileUpload"];function B(n,o){if(1&n&&(t.TgZ(0,"app-ct-col",0),t._uU(1,"\n        "),t._UZ(2,"app-ct-rest-status",6),t._uU(3,"\n    "),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("content",e.response)}}let $=(()=>{class n{constructor(e,i){this.functionsService=e,this.router=i}cancel(){this.router.navigate(["/dispatcher","functions"])}upload(){this.functionsService.uploadFunction(this.fileUpload.fileInput.nativeElement.files[0]).subscribe(e=>{this.response=e,e.status===J.o.OK&&this.cancel()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["add-function"]],viewQuery:function(e,i){if(1&e&&t.Gf(P,7),2&e){let a;t.iGM(a=t.CRH())&&(i.fileUpload=a.first)}},decls:49,vars:2,consts:[["size","6"],["fileUpload",""],["justify-content","flex-end","gap","8px"],["mat-stroked-button","mat-stroked-button",3,"click"],["mat-flat-button","mat-flat-button","color","primary",3,"disabled","click"],["size","6",4,"ngIf"],[3,"content"]],template:function(e,i){if(1&e&&(t.TgZ(0,"app-ct-cols"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-col",0),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-section-header"),t._uU(7,"\n                "),t.TgZ(8,"app-ct-section-header-row"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11,"Add Function"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n            "),t.qZA(),t._uU(14,"\n            "),t.TgZ(15,"app-ct-section-body"),t._uU(16,"\n                "),t.TgZ(17,"app-ct-section-body-row"),t._uU(18,"\n                    "),t._UZ(19,"app-ct-file-upload",null,1),t._uU(21,"\n                "),t.qZA(),t._uU(22,"\n            "),t.qZA(),t._uU(23,"\n            "),t.TgZ(24,"app-ct-section-footer"),t._uU(25,"\n                "),t.TgZ(26,"app-ct-section-footer-row"),t._uU(27,"\n                    "),t.TgZ(28,"app-ct-flex",2),t._uU(29,"\n                        "),t.TgZ(30,"app-ct-flex-item"),t._uU(31,"\n                            "),t.TgZ(32,"button",3),t.NdJ("click",function(){return i.cancel()}),t._uU(33,"Cancel "),t.qZA(),t._uU(34,"\n                        "),t.qZA(),t._uU(35,"\n                        "),t.TgZ(36,"app-ct-flex-item"),t._uU(37,"\n                            "),t.TgZ(38,"button",4),t.NdJ("click",function(){return i.upload()}),t._uU(39,"Upload\n                                function"),t.qZA(),t._uU(40,"\n                        "),t.qZA(),t._uU(41,"\n                    "),t.qZA(),t._uU(42,"\n                "),t.qZA(),t._uU(43,"\n            "),t.qZA(),t._uU(44,"\n        "),t.qZA(),t._uU(45,"\n    "),t.qZA(),t._uU(46,"\n    "),t.YNc(47,B,4,1,"app-ct-col",5),t._uU(48,"\n"),t.qZA()),2&e){const a=t.MAs(20);t.xp6(38),t.Q6J("disabled",!(null!=a&&null!=a.fileInput&&null!=a.fileInput.nativeElement&&null!=a.fileInput.nativeElement.files&&a.fileInput.nativeElement.files.length)),t.xp6(9),t.Q6J("ngIf",i.response)}},dependencies:[s.O5,T.U,h.n,x.V,A.R,D.t,b.W,I.E,v.i,F.Z,C.t,y.B,R.i,M._,j.R,Y.lW],styles:[".file-names[_ngcontent-%COMP%]{margin-left:1em;font-size:125%;padding:8px}"]}),n})();var u=c(3626),z=c(9272),G=c(8318),E=c(3788),H=c(4190),W=c(5938),L=c(4853),K=c(7530),X=c(1336),V=c(7392),k=c(455),r=function(n,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,o)};function nt(n,o){1&n&&t.GkF(0)}function et(n,o){if(1&n&&(t.TgZ(0,"app-ct-flex-item"),t._uU(1,"\n                            "),t.YNc(2,nt,1,0,"ng-container",6),t._uU(3,"\n                        "),t.qZA()),2&n){t.oxw(2);const e=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",e)}}function ot(n,o){1&n&&(t.TgZ(0,"app-ct-section-header-row"),t._uU(1,"\n            "),t.TgZ(2,"app-ct-alert",7),t._uU(3,"Upload and deletion of functions are disabled, assetMode is 'replicated'."),t.qZA(),t._uU(4,"\n        "),t.qZA())}function ct(n,o){1&n&&t.GkF(0)}function it(n,o){1&n&&t.GkF(0)}function at(n,o){if(1&n&&(t.TgZ(0,"app-ct-flex-item"),t._uU(1,"\n                    "),t.YNc(2,it,1,0,"ng-container",6),t._uU(3,"\n                "),t.qZA()),2&n){t.oxw(2);const e=t.MAs(6);t.xp6(2),t.Q6J("ngTemplateOutlet",e)}}function ut(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-ct-section"),t._uU(1,"\n    "),t.TgZ(2,"app-ct-section-header"),t._uU(3,"\n        "),t.TgZ(4,"app-ct-section-header-row"),t._uU(5,"\n            "),t.TgZ(6,"app-ct-flex",3),t._uU(7,"\n                "),t.TgZ(8,"app-ct-flex-item"),t._uU(9,"\n                    "),t.TgZ(10,"app-ct-heading"),t._uU(11,"Functions"),t.qZA(),t._uU(12,"\n                "),t.qZA(),t._uU(13,"\n                "),t.TgZ(14,"app-ct-flex-item"),t._uU(15,"\n                    "),t.TgZ(16,"app-ct-flex",4),t._uU(17,"\n                        "),t.TgZ(18,"app-ct-flex-item"),t._uU(19,"\n                            "),t.TgZ(20,"mat-slide-toggle",5),t.NdJ("ngModelChange",function(a){t.CHM(e);const l=t.oxw();return t.KtG(l.showParams=a)}),t._uU(21,"Show Params"),t.qZA(),t._uU(22,"\n                        "),t.qZA(),t._uU(23,"\n                        "),t.YNc(24,et,4,1,"app-ct-flex-item",0),t._uU(25,"\n                    "),t.qZA(),t._uU(26,"\n                "),t.qZA(),t._uU(27,"\n            "),t.qZA(),t._uU(28,"\n        "),t.qZA(),t._uU(29,"\n        "),t.YNc(30,ot,5,0,"app-ct-section-header-row",0),t._uU(31,"\n    "),t.qZA(),t._uU(32,"\n    "),t.TgZ(33,"app-ct-section-body"),t._uU(34,"\n        "),t.TgZ(35,"app-ct-section-body-row"),t._uU(36,"\n            "),t.YNc(37,ct,1,0,"ng-container",6),t._uU(38,"\n        "),t.qZA(),t._uU(39,"\n    "),t.qZA(),t._uU(40,"\n    "),t.TgZ(41,"app-ct-section-footer"),t._uU(42,"\n        "),t.TgZ(43,"app-ct-section-footer-row"),t._uU(44,"\n            "),t.TgZ(45,"app-ct-flex",3),t._uU(46,"\n                "),t.TgZ(47,"app-ct-flex-item"),t._uU(48,"\n                    "),t._uU(49,"\n                "),t.qZA(),t._uU(50,"\n                "),t.YNc(51,at,4,1,"app-ct-flex-item",0),t._uU(52,"\n            "),t.qZA(),t._uU(53,"\n        "),t.qZA(),t._uU(54,"\n    "),t.qZA(),t._uU(55,"\n"),t.qZA()}if(2&n){const e=t.oxw(),i=t.MAs(3);t.xp6(20),t.Q6J("ngModel",e.showParams),t.xp6(4),t.Q6J("ngIf",!e.dispatcherAssetModeService.isReplicated(e.functionsResult.assetMode)),t.xp6(6),t.Q6J("ngIf",e.dispatcherAssetModeService.isReplicated(e.functionsResult.assetMode)),t.xp6(7),t.Q6J("ngTemplateOutlet",i),t.xp6(14),t.Q6J("ngIf",!e.dispatcherAssetModeService.isReplicated(e.functionsResult.assetMode))}}function lt(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"\n                    Code\n                "),t.qZA())}function pt(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.code)}}function st(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"\n                    Type\n                "),t.qZA())}function _t(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.type)}}function mt(n,o){1&n&&(t.TgZ(0,"th",18),t._uU(1,"\n                    Params\n                "),t.qZA())}function dt(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1,"\n                    "),t.TgZ(2,"div",20),t._uU(3,"\n                        "),t.TgZ(4,"app-ct-pre"),t._uU(5),t.qZA(),t._uU(6,"\n                    "),t.qZA(),t._uU(7,"\n                "),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(2),t.Q6J("hidden",!i.showParams),t.xp6(3),t.Oqu(e.params)}}function ft(n,o){1&n&&t._UZ(0,"th",18)}function rt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-ct-flex",22),t._uU(1,"\n                        "),t.TgZ(2,"app-ct-flex-item"),t._uU(3,"\n                            "),t.TgZ(4,"button",23),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.delete(a))}),t._uU(5,"\n                                "),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA(),t._uU(8,"\n                            "),t.qZA(),t._uU(9,"\n                        "),t.qZA(),t._uU(10,"\n                    "),t.qZA()}}function gt(n,o){if(1&n&&(t.TgZ(0,"td",19),t._uU(1,"\n                    "),t.YNc(2,rt,11,0,"app-ct-flex",21),t._uU(3,"\n                "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!e.dispatcherAssetModeService.isReplicated(e.functionsResult.assetMode))}}function Ut(n,o){1&n&&t._UZ(0,"tr",24)}function Zt(n,o){if(1&n&&t._UZ(0,"tr",25),2&n){const e=o.$implicit,i=t.oxw(2);t.ekj("deleted-table-row",i.deletedRows.includes(e))}}function Tt(n,o){if(1&n&&(t._uU(0,"\n    "),t.TgZ(1,"ct-table",8),t._uU(2,"\n        "),t.TgZ(3,"table",9),t._uU(4,"\n            "),t.ynx(5,10),t._uU(6,"\n                "),t.YNc(7,lt,2,0,"th",11),t._uU(8,"\n                "),t.YNc(9,pt,2,1,"td",12),t._uU(10,"\n            "),t.BQk(),t._uU(11,"\n            "),t.ynx(12,13),t._uU(13,"\n                "),t.YNc(14,st,2,0,"th",11),t._uU(15,"\n                "),t.YNc(16,_t,2,1,"td",12),t._uU(17,"\n            "),t.BQk(),t._uU(18,"\n            "),t.ynx(19,14),t._uU(20,"\n                "),t.YNc(21,mt,2,0,"th",11),t._uU(22,"\n                "),t.YNc(23,dt,8,2,"td",12),t._uU(24,"\n            "),t.BQk(),t._uU(25,"\n            "),t.ynx(26,15),t._uU(27,"\n                "),t.YNc(28,ft,1,0,"th",11),t._uU(29,"\n                "),t.YNc(30,gt,4,1,"td",12),t._uU(31,"\n            "),t.BQk(),t._uU(32,"\n            "),t.YNc(33,Ut,1,0,"tr",16),t._uU(34,"\n            "),t.YNc(35,Zt,1,2,"tr",17),t._uU(36,"\n        "),t.qZA(),t._uU(37,"\n    "),t.qZA(),t._uU(38,"\n")),2&n){const e=t.oxw();t.xp6(1),t.Q6J("isWaiting",e.isLoading),t.xp6(2),t.Q6J("dataSource",e.dataSource),t.xp6(30),t.Q6J("matHeaderRowDef",e.columnsToDisplay),t.xp6(2),t.Q6J("matRowDefColumns",e.columnsToDisplay)}}function ht(n,o){1&n&&(t._uU(0,"\n    "),t.TgZ(1,"a",26),t._uU(2,"\n        "),t.TgZ(3,"button",27),t._uU(4," Add Function "),t.qZA(),t._uU(5,"\n    "),t.qZA(),t._uU(6,"\n"))}class p extends G.S{constructor(o,e,i,a){super(a),this.functionService=o,this.dispatcherAssetModeService=e,this.dialog=i,this.authenticationService=a,this.dataSource=new u.by([]),this.columnsToDisplay=["code","type","params","bts"],this.deletedRows=[],this.showParams=!1}ngOnInit(){this.updateTable(0)}updateTable(o){this.setIsLoadingStart(),this.functionService.getFunctions(o.toString()).subscribe({next:e=>{this.functionsResult=e,this.dataSource=new u.by(e.functions)},complete:()=>{this.setIsLoadingEnd()}})}delete(o){this.deletedRows.push(o),this.functionService.deleteCommit(o.id.toString()).subscribe()}nextPage(){}prevPage(){}}p.\u0275fac=function(o){return new(o||p)(t.Y36(Z),t.Y36(H.F),t.Y36(W.uw),t.Y36(E.$h))},p.\u0275cmp=t.Xpm({type:p,selectors:[["functions"]],features:[t.qOj],decls:7,vars:1,consts:[[4,"ngIf"],["MainTableTemplate",""],["addButtonTemplate",""],["justify-content","space-between"],["justify-content","flex-end","align-items","center","gap","16px"],[3,"ngModel","ngModelChange"],[4,"ngTemplateOutlet"],["theme","info"],[3,"isWaiting"],["mat-table","","multiTemplateDataRows","",1,"mat-table",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","params"],["matColumnDef","bts"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"deleted-table-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"hidden"],["justify-content","flex-end","gap","8px",4,"ngIf"],["justify-content","flex-end","gap","8px"],["mat-flat-button","","color","warn","size","forTableRow",3,"click"],["mat-header-row",""],["mat-row",""],["routerLink","/dispatcher/functions/add"],["mat-flat-button","","color","primary"]],template:function(o,e){1&o&&(t.YNc(0,ut,56,5,"app-ct-section",0),t._uU(1,"\n\n\n\n"),t.YNc(2,Tt,39,4,"ng-template",null,1,t.W1O),t._uU(4,"\n\n\n\n"),t.YNc(5,ht,7,0,"ng-template",null,2,t.W1O)),2&o&&t.Q6J("ngIf",e.functionsResult)},dependencies:[s.O5,s.tP,m.rH,L.Q,T.U,h.n,x.V,A.R,K.a,v.i,F.Z,C.t,y.B,R.i,M._,X.v,Y.lW,V.Hw,k.Rr,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,_.JJ,_.On]}),function(n,o,e,i){var d,a=arguments.length,l=a<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(n,o,e,i);else for(var g=n.length-1;g>=0;g--)(d=n[g])&&(l=(a<3?d(l):a>3?d(o,e,l):d(o,e))||l);a>3&&l&&Object.defineProperty(o,e,l)}([(0,z.K)({question:n=>`Do you want to delete Function\xa0#${n.id}`,rejectTitle:"Cancel",resolveTitle:"Delete"}),r("design:type",Function),r("design:paramtypes",[Object]),r("design:returntype",void 0)],p.prototype,"delete",null);var xt=c(1060),At=c(1623);const N=[{path:"",component:p},{path:"add",component:$,data:{backConfig:["../"]}}];let S=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(N),m.Bz]}),n})(),vt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,S,At.E,xt.$,_.u5,_.UX,w.aw.forChild({})]}),n})()}}]);